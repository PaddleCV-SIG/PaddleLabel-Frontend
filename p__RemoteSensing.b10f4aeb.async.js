(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[333],{55252:function(L){L.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},75513:function(L){L.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",draw:"draw___Ff0QW",pblock:"pblock___3sGxC",progress:"progress___KQyBx",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},79729:function(L,w,n){"use strict";n.r(w),n.d(w,{default:function(){return be}});var Ue=n(34669),ae=n(54458),Xe=n(20136),D=n(55241),Qe=n(49111),re=n(19650),We=n(62350),ie=n(75443),$e=n(57663),P=n(71577),b=n(2824),h=n(67294),se=n(75513),M=n.n(se),le=n(8088),g=n(61541),q=n(44434),ce=n(5041),de=n(49813),we=n(98858),x=n(4914),qe=n(13062),me=n(71230),_e=n(59250),V=n(13013),et=n(89032),R=n(15746),tt=n(30887),E=n(54689),nt=n(34792),H=n(48086),z=n(89366),F=n(57254),ve=n(55252),C=n.n(ve),_=n(48971),e=n(85893);function ge(r){H.default.info("Click on menu item."),console.log("click",r)}var Y=(0,e.jsxs)(E.Z,{onClick:ge,children:[(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(z.Z,{}),children:"band_1"},"1"),(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(z.Z,{}),children:"band_2"},"2"),(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(z.Z,{}),children:"band_3"},"3")]}),fe=function(){var o=(0,_.YB)(),i=o.formatMessage({id:"component.PPRS.r"}),m=o.formatMessage({id:"component.PPRS.g"}),j=o.formatMessage({id:"component.PPRS.b"}),I=o.formatMessage({id:"component.PPRS.dataInformation"}),u=o.formatMessage({id:"component.PPRS.fileName"}),c=o.formatMessage({id:"component.PPRS.row"}),l=o.formatMessage({id:"component.PPRS.column"}),f=o.formatMessage({id:"component.PPRS.bands"}),p=o.formatMessage({id:"component.PPRS.dataType"}),J=o.formatMessage({id:"component.PPRS.EPSG"}),O=o.formatMessage({id:"component.PPRS.unit"});return(0,e.jsxs)("div",{children:[(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(R.Z,{className:C().RSPop1,children:(0,e.jsx)("span",{children:i})}),(0,e.jsx)(R.Z,{className:C().RSPop2,children:(0,e.jsx)(V.Z,{overlay:Y,children:(0,e.jsxs)(P.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(F.Z,{})]})})}),(0,e.jsx)(R.Z,{className:C().RSPop1,children:(0,e.jsx)("span",{children:m})}),(0,e.jsx)(R.Z,{className:C().RSPop2,children:(0,e.jsx)(V.Z,{overlay:Y,children:(0,e.jsxs)(P.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(F.Z,{})]})})}),(0,e.jsx)(R.Z,{className:C().RSPop1,children:(0,e.jsx)("span",{children:j})}),(0,e.jsx)(R.Z,{className:C().RSPop2,children:(0,e.jsx)(V.Z,{overlay:Y,children:(0,e.jsxs)(P.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(F.Z,{})]})})})]}),(0,e.jsxs)(x.Z,{title:I,column:1,bordered:!0,children:[(0,e.jsx)(x.Z.Item,{label:u,children:"A/XXX.tif"}),(0,e.jsx)(x.Z.Item,{label:c,children:"1234"}),(0,e.jsx)(x.Z.Item,{label:l,children:"897"}),(0,e.jsx)(x.Z.Item,{label:f,children:"7"}),(0,e.jsx)(x.Z.Item,{label:p,children:"UInt16"}),(0,e.jsx)(x.Z.Item,{label:J,children:"7030"}),(0,e.jsx)(x.Z.Item,{label:O,children:"m"})]})]})},ue=fe,Se=n(97927),he=n(37233),pe=n(51327),ee=n(11849);function xe(r){var o=(0,h.useState)(0),i=(0,b.Z)(o,2),m=i[0],j=i[1],I=(0,h.useState)(!1),u=(0,b.Z)(I,2),c=u[0],l=u[1];(0,h.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(r.currentLabel||{}))},[r.currentLabel]),(0,h.useEffect)(function(){localStorage.setItem("annotations",JSON.stringify(r.annotations||{}))},[r.annotations]);var f=function(){var t,s=(t=r.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.globalDrawModeEnabled();console.log(s)},p=function(t){var s=localStorage.getItem("currentLabel");if(s!="{}"){var a,Z;l(!0);var S=JSON.parse(s||"{}");(a=r.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.enableDraw(t),(Z=r.leafletMapRef.current)===null||Z===void 0||Z.leafletElement.pm.setPathOptions({color:S==null?void 0:S.color,fillColor:S==null?void 0:S.color,fillOpacity:.4})}else{var N;alert("Test"),(N=r.leafletMapRef.current)===null||N===void 0||N.leafletElement.pm.disableDraw(t),l(!1)}},J=function(t){var s;(s=r.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.disableDraw(t),l(!1),f()},O=function(){var t;return(t=r.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.Draw.getActiveShape()},X=function(){if(O()=="Polygon"){var t;(t=r.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._removeLastVertex(),f()}else f(),l(!1)},T=function(){var t;(t=r.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalDragMode(),f()},te=function(){if(O()=="Polygon"){var t;(t=r.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._finishShape(),f(),l(!1)}else f(),l(!1)},ne=function(){var t;(t=r.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.enableGlobalRemovalMode(),f()},Q=function(){var t;(t=r.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalEditMode(),f(),l(!1)},A=function(){l(!1)},W=function(t){var s=t.toGeoJSON(),a=JSON.parse(localStorage.getItem("currentLabel")||"{}");j(m+1),s.properties={labelName:a==null?void 0:a.name,stroke:a==null?void 0:a.color,annotationId:m+1};var Z=JSON.parse(localStorage.getItem("annotations")||"{}"),S=(0,ee.Z)((0,ee.Z)({},Z),{},{features:Z.features.concat(s)});console.log(S),r.setAnnotations(S),r.recordHistory(S)};function oe(v){l(!1),W(v.layer)}var $=function(t){console.log(t)},k=function(){var t;(t=r.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomIn(),f()},G=function(){var t;(t=r.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomOut(),f()};return{polyVisable:c,RSDraw:p,RSDrawDisable:J,removeLastVertex:X,moveShape:T,finishShape:te,removeShape:ne,editMode:Q,saveGeoJson:A,storeOnDb:W,onShapeCreate:oe,onShapeEdit:$,toolZoomIn:k,toolZoomOut:G,currentShape:O}}var K=n(27992),ye=n(15156),y=40,ot=function(){var o=IntlInit("component.history");function i(){localStorage.removeItem("history"),U([])}function m(u){var c=localStorage.getItem("history"),l=c?JSON.parse(c):{index:-1,items:[]};if(JSON.stringify(l.items[l.index])!=JSON.stringify(u)){var f=l.index>y?l.index-y:0,p=l.items.splice(f,l.index==0?1:l.index+1);l.items=p.concat([u]),l.index<=y?l.index++:l.index=y+1,localStorage.setItem("history",JSON.stringify(l))}}function j(){var u=localStorage.getItem("history");if(!!u){var c=JSON.parse(u);if(!!c){if(c.index>=c.items.length-1){_message.error(o("noNext"));return}return c.index++,localStorage.setItem("history",JSON.stringify(c)),c.items[c.index]}}}function I(){var u=localStorage.getItem("history");if(!!u){var c=JSON.parse(u);if(console.log("history",c),!c||!c.index||c.index<=1){_message.error("noPrev");return}return c.index--,localStorage.setItem("history",JSON.stringify(c)),c.items[c.index]}}return{init:i,record:m,forward:j,backward:I}};function je(){localStorage.removeItem("history"),U([])}function U(r){var o=localStorage.getItem("history"),i=o?JSON.parse(o):{index:-1,items:[]};if(JSON.stringify(i.items[i.index])!=JSON.stringify(r)){var m=i.index>y?i.index-y:0,j=i.items.splice(m,i.index==0?1:i.index+1);i.items=j.concat([r]),i.index<=y?i.index++:i.index=y+1,localStorage.setItem("history",JSON.stringify(i))}}function Ze(){var r=localStorage.getItem("history");if(!!r){var o=JSON.parse(r);if(!!o){if(o.index>=o.items.length-1){H.default.error("noNext");return}return o.index++,localStorage.setItem("history",JSON.stringify(o)),o.items[o.index]}}}function Pe(){var r=localStorage.getItem("history");if(!!r){var o=JSON.parse(r);if(console.log("history",o),!o||!o.index||o.index<=1){H.default.error("noPrev");return}return o.index--,localStorage.setItem("history",JSON.stringify(o)),o.items[o.index]}}var Me=function(){var o=(0,ye.$L)(h.useState,h.useEffect,{label:{oneHot:!1},tool:{defaultTool:"mover"},effectTrigger:{}}),i=(0,b.Z)(o,10),m=i[0],j=i[1],I=i[2],u=i[3],c=i[4],l=i[5],f=i[6],p=i[7],J=i[8],O=i[9],X=(0,h.useState)(!1),T=(0,b.Z)(X,2),te=T[0],ne=T[1],Q=(0,h.useState)(!1),A=(0,b.Z)(Q,2),W=A[0],oe=A[1],$=(0,h.useState)({type:"FeatureCollection",features:[]}),k=(0,b.Z)($,2),G=k[0],v=k[1];(0,h.useEffect)(function(){je()},[]),console.log("rs is re-rendering! label.curr: ".concat(JSON.stringify(p.curr)));var t=h.useRef(null),s=xe({leafletMapRef:t,currentLabel:p.curr,setAnnotations:v,annotations:G,recordHistory:U}),a=(0,_.YB)(),Z=a.formatMessage({id:"pages.Maps.finished"}),S=a.formatMessage({id:"pages.Maps.removeLastVertex"}),N=a.formatMessage({id:"pages.Maps.cancel"}),Re=a.formatMessage({id:"pages.Maps.boundary"}),Ce=a.formatMessage({id:"pages.Maps.remoteSensing"}),Ie=a.formatMessage({id:"pages.Maps.grids"}),Oe=a.formatMessage({id:"pages.toolBar.polygon"}),Be=a.formatMessage({id:"pages.toolBar.rubber"}),De=a.formatMessage({id:"pages.toolBar.zoomIn"}),Ne=a.formatMessage({id:"pages.toolBar.zoomOut"}),Le=a.formatMessage({id:"pages.toolBar.move"}),Ee=a.formatMessage({id:"pages.toolBar.unDo"}),Je=a.formatMessage({id:"pages.toolBar.reDo"}),Te=a.formatMessage({id:"pages.toolBar.save"}),Ae=a.formatMessage({id:"pages.toolBar.edit"}),ke=a.formatMessage({id:"pages.toolBar.clearMark"}),Ge=a.formatMessage({id:"pages.toolBar.interactor"}),Ve=a.formatMessage({id:"pages.toolBar.segmentThreshold"}),He=a.formatMessage({id:"pages.toolBar.transparency"}),ze=a.formatMessage({id:"pages.toolBar.visualRadius"}),Fe=a.formatMessage({id:"pages.toolBar.determineOutline"}),Ye=a.formatMessage({id:"pages.toolBar.divideData"}),Ke=a.formatMessage({id:"pages.toolBar.export"});return(0,e.jsxs)(le.Z,{className:M().segment,children:[(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(D.Z,{placement:"rightTop",visible:s.polyVisable,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)(P.Z,{type:"primary",onClick:function(){s.finishShape()},children:Z}),(0,e.jsx)(P.Z,{type:"primary",onClick:function(){s.removeLastVertex()},children:S}),(0,e.jsx)(ie.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,e.jsx)(P.Z,{type:"primary",onClick:function(){s.RSDrawDisable(s.currentShape())},children:N})})]})}),trigger:m.curr=="Polygon"?"hover":"click",children:(0,e.jsx)(g.Z,{active:m.curr=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){m.setCurr("Polygon"),s.RSDraw("Polygon")},children:Oe})}),(0,e.jsx)(g.Z,{onClick:function(){s.editMode()},imgSrc:"./pics/buttons/edit.png",children:Ae}),(0,e.jsxs)(D.Z,{placement:"rightTop",title:"title",content:"content",trigger:m.curr=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){s.removeShape()},children:Be})]}),(0,e.jsx)(g.Z,{onClick:function(){s.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:De}),(0,e.jsx)(g.Z,{onClick:function(){s.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:Ne}),(0,e.jsx)(g.Z,{onClick:function(){s.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:Te}),(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return s.moveShape()},children:Le}),(0,e.jsx)(g.Z,{onClick:function(){var B=Pe()},imgSrc:"./pics/buttons/prev.png",children:Ee}),(0,e.jsx)(g.Z,{onClick:function(){var B=Ze()},imgSrc:"./pics/buttons/next.png",children:Je}),(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:ke})]}),(0,e.jsxs)("div",{className:M().mainStage,children:[(0,e.jsx)("div",{className:M().draw,children:(0,e.jsx)(he.Z,{leafletMapRef:t,onShapeCreate:s.onShapeCreate,onShapeEdit:s.onShapeEdit})}),(0,e.jsx)("div",{className:M().pblock,children:(0,e.jsx)("div",{className:M().progress,children:(0,e.jsx)(ae.Z,{percent:50,status:"active"})})})]}),(0,e.jsxs)(q.Z,{disLoc:"right",children:[(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:Ge}),(0,e.jsx)(K.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:Ve}),(0,e.jsx)(K.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:He}),(0,e.jsx)(K.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:ze}),(0,e.jsxs)(D.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)(de.Z,{}),trigger:m.curr=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){m.setCurr("boundry")},children:Re})]}),(0,e.jsxs)(D.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,e.jsx)(ue,{}),trigger:m.curr=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){m.setCurr("colorgun")},children:Ce})]}),(0,e.jsxs)(D.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,e.jsx)(Se.Z,{}),trigger:m.curr=="grid"?"click":"hover",children:[" ",(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){m.setCurr("grid")},children:Ie})]}),(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/data_division.png",children:Ye}),(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/export.png",children:Ke})]}),(0,e.jsxs)("div",{className:M().rightSideBar,children:[(0,e.jsx)("div",{className:M().determinOutline,children:(0,e.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:Fe})}),(0,e.jsx)(ce.Z,{selectedLabel:p.curr,onLabelSelect:function(B){p.setCurr(B),console.log(B)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(pe.Z,{annotations:G,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},be=Me}}]);
