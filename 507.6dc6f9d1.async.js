(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[507],{52822:function(u){u.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(u){u.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(u){u.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(u){u.exports={container:"container___G0FNe"}},80961:function(u){u.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(u){u.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28",toolBarButtonContainerWrapperDisabled:"toolBarButtonContainerWrapperDisabled___39n5R",toolBarButtonImgDisabled:"toolBarButtonImgDisabled___rRnhA"}},63097:function(u,M,e){"use strict";var H=e(20136),_=e(55241),v=e(2824),c=e(67294),r=e(52822),s=e.n(r),f=e(63144),l=e(85893),L=function(F){var z=(0,c.useState)(F.color||"#FFF"),n=(0,v.Z)(z,2),y=n[0],a=n[1];return(0,c.useEffect)(function(){a(F.color||"#FFF")},[F]),F.changeable?(0,l.jsx)(_.Z,{getPopupContainer:function(U){return U.parentElement||document.body},overlayClassName:s().popover,openClassName:s().popoverOpenClassName,placement:"bottom",content:(0,l.jsx)(f.xS,{disableAlpha:!0,color:y,onChange:function(U){a(U.hex)},onChangeComplete:F.onChange}),trigger:"click",children:(0,l.jsx)("div",{className:s().roundBall,style:{backgroundColor:y}})}):(0,l.jsx)("div",{className:s().roundBall,style:{backgroundColor:y}})};M.Z=L},5041:function(u,M,e){"use strict";e.d(M,{Z:function(){return V}});var H=e(54421),_=e(38272),v=e(57663),c=e(71577),r=e(2824),s=e(67294),f=e(56131),l=e.n(f),L=e(49111),$=e(19650),F=e(11849),z=e(5882),n=e.n(z),y=e(63097),a=e(85893),S=function(t){var i=(0,F.Z)({},t.label),g=(0,s.useState)(i.invisible),C=(0,r.Z)(g,2),j=C[0],B=C[1],R=(0,s.useState)(0),I=(0,r.Z)(R,2),x=I[0],T=I[1],h=t.hideEye?" ":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:n().eye,style:{backgroundImage:j?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(A){A.stopPropagation(),B(!j),t.onLabelModify&&t.onLabelModify(i)}})," "]}),P=t.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(y.Z,{color:i.color,changeable:!1,onChange:function(A){i.color=A.hex,t.onLabelModify(i)}}),E=(0,a.jsxs)(_.ZP.Item,{className:"".concat(n().listItem," ").concat(t.active?n().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(i)},"data-test-id":"category-".concat(i.ith),children:[(0,a.jsxs)($.Z,{align:"center",size:5,children:[h,i.name,P]}),(0,a.jsx)("a",{className:n().delete,onClick:function(A){A.stopPropagation();var N=new Date().getTime();N-x<300||(T(N),t.onLabelDelete(i))},"data-test-id":"deleteCategory-".concat(i.ith)})]});return E},U=S,le=e(71194),o=e(50146),ee=e(47673),G=e(24044),ne=e(9715),Z=e(93766),Q=e(48971),K=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],D=function(t){var i,g,C=(0,Q.YB)(),j=C.formatMessage({id:"component.PPAddLabelModal.selectColor"}),B=C.formatMessage({id:"component.PPAddLabelModal.addLabel"}),R=C.formatMessage({id:"component.PPAddLabelModal.labelName"}),I=C.formatMessage({id:"component.PPCreater.cancel"}),x=C.formatMessage({id:"component.PPSegMode.ok"}),T=(0,s.useState)(((i=t.defaultLabel)===null||i===void 0?void 0:i.color)||K[t.order||0]),h=(0,r.Z)(T,2),P=h[0],E=h[1];(0,s.useEffect)(function(){var O;E(((O=t.defaultLabel)===null||O===void 0?void 0:O.color)||K[t.order||0])},[t]);var W=t.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(Z.Z.Item,{label:j,name:"color",children:(0,a.jsx)(y.Z,{color:P,changeable:!0,onChange:function(b){E(b.hex)}})}),A=Z.Z.useForm(),N=(0,r.Z)(A,1),Y=N[0];return(0,a.jsx)(o.Z,{title:B,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,a.jsxs)(Z.Z,{form:Y,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(g=t.defaultLabel)===null||g===void 0?void 0:g.name},onFinish:function(b){var J={name:b.labelname,color:P};t.onLabelAdd(J),Y.resetFields()},autoComplete:"off",children:[(0,a.jsx)(Z.Z.Item,{label:R,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,a.jsx)(G.Z,{autoComplete:"off"})}),W,(0,a.jsx)(Z.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsxs)($.Z,{children:[(0,a.jsx)(c.Z,{onClick:function(){var b;(b=t.onCancel)===null||b===void 0||b.call(0),Y.resetFields()},children:I}),(0,a.jsx)(c.Z,{type:"primary",htmlType:"submit",children:x})]})})]})})},te=D,k=function(t){var i,g=(0,Q.YB)(),C=g.formatMessage({id:"component.PPLabelList.addLabel"}),j=g.formatMessage({id:"component.PPLabelList.labelList"});if(t.labels)for(var B=0;B<t.labels.length;B++)t.labels[B].ith=B;var R=(0,s.useState)(!1),I=(0,r.Z)(R,2),x=I[0],T=I[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.ZP,{className:l().labelList,size:"large",header:(0,a.jsx)("div",{className:l().listHeader,children:j}),footer:(0,a.jsx)("div",{children:(0,a.jsx)(c.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){T(!0)},block:!0,children:C})}),bordered:!0,dataSource:t.labels,renderItem:function(P){var E;return(0,a.jsx)(U,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:P,active:(E=t.activeIds)===null||E===void 0?void 0:E.has(P.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,a.jsx)(te,{hideColorPicker:t.hideColorPicker,order:(i=t.labels)===null||i===void 0?void 0:i.length,visible:x,onLabelAdd:function(P){t.onLabelAdd(P),T(!1)},onCancel:function(){T(!1)}})]})},V=k},8088:function(u,M,e){"use strict";var H=e(67294),_=e(78677),v=e.n(_),c=e(85893),r=function(f){return(0,c.jsx)("div",{className:"".concat(v().container," ").concat(f.className),children:f.children})};M.Z=r},57436:function(u,M,e){"use strict";var H=e(91220),_=e(2824),v=e(67294),c=e(65031),r=e(84420),s=e.n(r),f=e(48971),l=e(85893),L="./pics/basketball.jpg";function $(z){switch(z){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var F=function(n){var y,a,S;console.log("stage redraw");var U=s()(n.imgSrc||"","anonymous"),le=(0,_.Z)(U,1),o=le[0],ee=(o==null?void 0:o.width)||0,G=(o==null?void 0:o.height)||0,ne=n.transparency==null?0:n.transparency*.01,Z=(0,f.tT)("InteractorData",function(d){return d.interactorData}),Q=(0,f.tT)("VisualRadius",function(d){return d.radius}),K=void 0;n.currentTool=="polygon"||n.currentTool=="rectangle"||n.currentTool=="editor"?K=n.drawTool.polygon:n.currentTool=="brush"||n.currentTool=="rubber"?K=n.drawTool.brush:n.currentTool=="interactor"&&(K=n.drawTool.interactor);var D=K,te=(0,v.useState)(0),k=(0,_.Z)(te,2),V=k[0],w=k[1],t=(0,v.useState)(0),i=(0,_.Z)(t,2),g=i[0],C=i[1],j=(0,v.useState)({x:0,y:0}),B=(0,_.Z)(j,2),R=B[0],I=B[1],x=(0,v.useRef)(null),T=(0,v.useRef)(null),h=(0,v.useRef)(null);function P(){var d=document.getElementById("dr");d&&(w(d.clientWidth),C(d.clientHeight))}(0,v.useEffect)(function(){window.removeEventListener("resize",P),window.addEventListener("resize",P);var d=document.getElementById("dr");d&&(w(d.clientWidth),C(d.clientHeight))},[]),(0,v.useEffect)(function(){!x.current||(x.current.container().style.cursor=$(n.currentTool))},[n.currentTool]);var E=function(m){return{e:m,mouseX:(m.evt.offsetX-R.x-V/2)/n.scale+ee/2,mouseY:(m.evt.offsetY-R.y-g/2)/n.scale+G/2,offsetX:-ee/2,offsetY:-G/2,canvasRef:h,stageRef:x,img:o}},W=function(m){D==null||D.onMouseDown(E(m))},A=function(m){D==null||D.onMouseMove(E(m))},N=function(m){D==null||D.onMouseUp(E(m))},Y=function(m){m.cancelBubble=!0,m.evt.preventDefault()},O=[],b={onDrag:n.onAnnotationModify,scale:n.scale,currentTool:n.currentTool,onSelect:n.setCurrentAnnotation,stageRef:x,currentAnnotation:n.currentAnnotation,transparency:ne,threshold:n.threshold,canvasRef:h,interactorData:Z,label:n.currentLabel,radius:Q};if(n.annotations){var J;console.log("PPStage rendering annotations:",n.annotations);var p=(J=h.current)===null||J===void 0?void 0:J.getContext("2d");p&&p.clearRect(0,0,p.canvas.width,p.canvas.height);var q=(0,H.Z)(n.annotations),re;try{for(q.s();!(re=q.n()).done;){var X=re.value;if(!!X){b.annotation=X;var ae=void 0;if(X.type=="polygon"||X.type=="rectangle")ae=n.drawTool.polygon.drawAnnotation(b);else if(X.type=="brush"||X.type=="rubber"){var oe;ae=(oe=n.drawTool.brush)===null||oe===void 0?void 0:oe.drawAnnotation(b)}else continue;O.push(ae)}}}catch(d){q.e(d)}finally{q.f()}}(y=n.drawTool)===null||y===void 0||(a=y.interactor)===null||a===void 0||a.drawAnnotation(b),(S=T.current)===null||S===void 0||S.batchDraw();var ie=n.currentTool=="mover";return(0,l.jsxs)("div",{"data-test-id":"stage-container","data-label-length":n.annotations?n.annotations.length:0,"data-image-src":n.imgSrc,children:[(0,l.jsx)("canvas",{style:{display:"none"},id:"canvasId",ref:h,width:o==null?void 0:o.width,height:o==null?void 0:o.height}),(0,l.jsx)("svg",{width:"0",height:"0",style:{position:"absolute",zIndex:"-1"},children:(0,l.jsx)("defs",{children:(0,l.jsx)("filter",{id:"remove-alpha",x:"0",y:"0",width:"100%",height:"100%",children:(0,l.jsx)("feComponentTransfer",{children:(0,l.jsx)("feFuncA",{type:"discrete",tableValues:"0 1"})})})})}),(0,l.jsxs)(c.Hf,{width:V,height:g,offsetX:-V/2,offsetY:-g/2,className:"stage",ref:x,draggable:ie,onDragMove:function(m){n.currentTool=="mover"},onDragEnd:function(m){n.currentTool=="mover"&&I({x:m.target.x(),y:m.target.y()})},children:[(0,l.jsx)(c.mh,{onMouseDown:W,onMouseMove:A,onMouseUp:N,onContextMenu:Y,scaleX:n.scale,scaleY:n.scale,draggable:!1,children:(0,l.jsx)(c.Ee,{name:"baseImage",draggable:!1,image:o,x:-((o==null?void 0:o.width)||0)/2,y:-((o==null?void 0:o.height)||0)/2})}),(0,l.jsxs)(c.mh,{ref:T,name:"annotation",scaleX:n.scale,scaleY:n.scale,onMouseDown:W,onMouseMove:A,onMouseUp:N,onContextMenu:Y,opacity:ne,children:[(0,l.jsx)(c.Ee,{x:-((o==null?void 0:o.width)||0)/2,y:-((o==null?void 0:o.height)||0)/2,image:h.current||void 0}),O]})]})]})};M.Z=F},44434:function(u,M,e){"use strict";var H=e(67294),_=e(80961),v=e.n(_),c=e(85893),r=function(f){var l=v().leftToolbar;return f.disLoc=="right"&&(l=v().rightToolbar),(0,c.jsx)("div",{className:l,children:f.children})};M.Z=r},61541:function(u,M,e){"use strict";var H=e(49111),_=e(19650),v=e(67294),c=e(82499),r=e.n(c),s=e(85893),f=function(L){return(0,s.jsx)("div",{unselectable:"on",className:"".concat(r().toolBarButtonContainerWrapper," ").concat(L.active&&r().toolBarButtonContainerWrapperActive," ").concat(L.disabled&&r().toolBarButtonContainerWrapperDisabled),onClick:!L.disabled&&L.onClick||void 0,children:(0,s.jsx)(_.Z,{align:"center",className:r().toolBarButtonContainer,size:0,children:(0,s.jsxs)(_.Z,{align:"center",direction:"vertical",className:r().toolBarButton,size:0,children:[(0,s.jsx)("img",{className:L.disabled?r().toolBarButtonImgDisabled:void 0,src:L.imgSrc}),(0,s.jsx)("div",{className:r().buttonText,children:L.children})]})})})};M.Z=f}}]);
