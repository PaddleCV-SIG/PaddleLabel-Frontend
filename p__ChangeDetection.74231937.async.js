(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[572],{73762:function(z){z.exports={RSPop1:"RSPop1___2Uh31",RSPop2:"RSPop2___2Q-T8"}},35524:function(z){z.exports={segment:"segment___3c01P",mainStage:"mainStage___2jlIH",draw:"draw___3Ftm7",halfMap:"halfMap___1HRmv",interval:"interval___21ItQ",pblock:"pblock___10iZ8",progress:"progress___wlToW",rightSideBar:"rightSideBar___25YC7",determinOutline:"determinOutline___2lYb0"}},76233:function(z,ee,n){"use strict";n.r(ee),n.d(ee,{default:function(){return Ze}});var Te=n(34669),se=n(54458),Ae=n(20136),T=n(55241),Je=n(49111),le=n(19650),Ge=n(62350),ie=n(75443),ke=n(57663),j=n(71577),A=n(2824),Z=n(67294),ce=n(35524),y=n.n(ce),de=n(8088),c=n(61541),te=n(44434),me=n(5041),ve=n(49813),Ve=n(98858),R=n(4914),ze=n(13062),ne=n(71230),He=n(59250),B=n(13013),Fe=n(89032),g=n(15746),Xe=n(30887),H=n(54689),Ye=n(34792),fe=n(48086),U=n(89366),O=n(57254),ge=n(73762),u=n.n(ge),oe=n(48971),e=n(85893);function ue(s){fe.default.info("Click on menu item."),console.log("click",s)}var N=(0,e.jsxs)(H.Z,{onClick:ue,children:[(0,e.jsx)(H.Z.Item,{icon:(0,e.jsx)(U.Z,{}),children:"band_1"},"1"),(0,e.jsx)(H.Z.Item,{icon:(0,e.jsx)(U.Z,{}),children:"band_2"},"2"),(0,e.jsx)(H.Z.Item,{icon:(0,e.jsx)(U.Z,{}),children:"band_3"},"3")]}),he=function(){var d=(0,oe.YB)(),b=d.formatMessage({id:"component.PPRS.r"}),h=d.formatMessage({id:"component.PPRS.g"}),P=d.formatMessage({id:"component.PPRS.b"}),J=d.formatMessage({id:"component.PPRS.dataInformation"}),D=d.formatMessage({id:"component.PPRS.fileName"}),I=d.formatMessage({id:"component.PPRS.row"}),v=d.formatMessage({id:"component.PPRS.column"}),m=d.formatMessage({id:"component.PPRS.bands"}),L=d.formatMessage({id:"component.PPRS.dataType"}),E=d.formatMessage({id:"component.PPRS.EPSG"}),M=d.formatMessage({id:"component.PPRS.unit"});return(0,e.jsxs)("div",{children:[(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(g.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:b})}),(0,e.jsx)(g.Z,{className:u().RSPop2,children:(0,e.jsx)(B.Z,{overlay:N,children:(0,e.jsxs)(j.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(O.Z,{})]})})}),(0,e.jsx)(g.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:h})}),(0,e.jsx)(g.Z,{className:u().RSPop2,children:(0,e.jsx)(B.Z,{overlay:N,children:(0,e.jsxs)(j.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(O.Z,{})]})})}),(0,e.jsx)(g.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:P})}),(0,e.jsx)(g.Z,{className:u().RSPop2,children:(0,e.jsx)(B.Z,{overlay:N,children:(0,e.jsxs)(j.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(O.Z,{})]})})})]}),(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(g.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:b})}),(0,e.jsx)(g.Z,{className:u().RSPop2,children:(0,e.jsx)(B.Z,{overlay:N,children:(0,e.jsxs)(j.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(O.Z,{})]})})}),(0,e.jsx)(g.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:h})}),(0,e.jsx)(g.Z,{className:u().RSPop2,children:(0,e.jsx)(B.Z,{overlay:N,children:(0,e.jsxs)(j.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(O.Z,{})]})})}),(0,e.jsx)(g.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:P})}),(0,e.jsx)(g.Z,{className:u().RSPop2,children:(0,e.jsx)(B.Z,{overlay:N,children:(0,e.jsxs)(j.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(O.Z,{})]})})})]}),(0,e.jsxs)(R.Z,{title:J,column:1,bordered:!0,children:[(0,e.jsx)(R.Z.Item,{label:D,children:"A/XXX.tif B/XXX.tif"}),(0,e.jsx)(R.Z.Item,{label:I,children:"1234"}),(0,e.jsx)(R.Z.Item,{label:v,children:"897"}),(0,e.jsx)(R.Z.Item,{label:m,children:"7 7"}),(0,e.jsx)(R.Z.Item,{label:L,children:"UInt16"}),(0,e.jsx)(R.Z.Item,{label:E,children:"7030"}),(0,e.jsx)(R.Z.Item,{label:M,children:"m"})]})]})},pe=he,Se=n(97927),ae=n(37233),xe=n(51327),re=n(11849);function je(s){var d=(0,Z.useState)(0),b=(0,A.Z)(d,2),h=b[0],P=b[1],J=(0,Z.useState)(!1),D=(0,A.Z)(J,2),I=D[0],v=D[1];(0,Z.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(s.currentLabel||{}))},[s.currentLabel]),(0,Z.useEffect)(function(){localStorage.setItem("annotations",JSON.stringify(s.annotations||{}))},[s.annotations]);var m=function(){var t,f=(t=s.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.globalDrawModeEnabled();console.log(f)},L=function(t){var f=localStorage.getItem("currentLabel");if(f!="{}"){var p,C;v(!0);var S=JSON.parse(f||"{}");(p=s.leafletMapRef.current)===null||p===void 0||p.leafletElement.pm.enableDraw(t),(C=s.leafletMapRef.current)===null||C===void 0||C.leafletElement.pm.setPathOptions({color:S==null?void 0:S.color,fillColor:S==null?void 0:S.color,fillOpacity:.4})}else{var k;alert("Test"),(k=s.leafletMapRef.current)===null||k===void 0||k.leafletElement.pm.disableDraw(t),v(!1)}},E=function(t){var f;(f=s.leafletMapRef.current)===null||f===void 0||f.leafletElement.pm.disableDraw(t),v(!1),m()},M=function(){var t;return(t=s.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.Draw.getActiveShape()},X=function(){if(M()=="Polygon"){var t;(t=s.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._removeLastVertex(),m()}else m(),v(!1)},K=function(){var t;(t=s.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalDragMode(),m()},W=function(){if(M()=="Polygon"){var t;(t=s.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._finishShape(),m(),v(!1)}else m(),v(!1)},G=function(){var t;(t=s.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.enableGlobalRemovalMode(),m()},l=function(){var t;(t=s.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalEditMode(),m(),v(!1)},r=function(){v(!1)},Y=function(t){var f=t.toGeoJSON(),p=JSON.parse(localStorage.getItem("currentLabel")||"{}");P(h+1),f.properties={labelName:p==null?void 0:p.name,stroke:p==null?void 0:p.color,annotationId:h+1};var C=JSON.parse(localStorage.getItem("annotations")||"{}"),S=(0,re.Z)((0,re.Z)({},C),{},{features:C.features.concat(f)});console.log(S),s.setAnnotations(S),s.recordHistory(S)};function $(i){v(!1),Y(i.layer)}var w=function(t){console.log(t)},q=function(){var t;(t=s.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomIn(),m()},_=function(){var t;(t=s.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomOut(),m()};return{polyVisable:I,RSDraw:L,RSDrawDisable:E,removeLastVertex:X,moveShape:K,finishShape:W,removeShape:G,editMode:l,saveGeoJson:r,storeOnDb:Y,onShapeCreate:$,onShapeEdit:w,toolZoomIn:q,toolZoomOut:_,currentShape:M}}var Q=n(27992),F=n(52758),ye=function(){var d=(0,Z.useState)(void 0),b=(0,A.Z)(d,2),h=b[0],P=b[1],J=(0,Z.useState)(),D=(0,A.Z)(J,2),I=D[0],v=D[1],m=(0,Z.useState)({type:"FeatureCollection",features:[]}),L=(0,A.Z)(m,2),E=L[0],M=L[1];(0,Z.useEffect)(function(){localStorage.removeItem("history"),X({type:"FeatureCollection",features:[]})},[]);function X(a){var x=localStorage.getItem("history"),o=x?JSON.parse(x):{index:-1,items:[]};if(JSON.stringify(o.items[o.index])!=JSON.stringify(a)){var V=o.index>F.q?o.index-F.q:0,Ee=o.items.splice(V,o.index==0?1:o.index+1);o.items=Ee.concat([a]),o.index<=F.q?o.index++:o.index=F.q+1,localStorage.setItem("history",JSON.stringify(o))}}var K=function(){var x=localStorage.getItem("history");if(!!x){var o=JSON.parse(x);if(!!o&&!(o.index>=o.items.length-1)){o.index++,localStorage.setItem("history",JSON.stringify(o));var V=o.items[o.index];M(V)}}},W=function(){var x=localStorage.getItem("history");if(!!x){var o=JSON.parse(x);if(!(!o||!o.index)&&!(o.index<=0)){o.index--,localStorage.setItem("history",JSON.stringify(o));var V=o.items[o.index];M(V)}}};console.log("rs is re-rendering! currentLabel: ".concat(JSON.stringify(I)));var G=Z.useRef(null),l=je({leafletMapRef:G,currentLabel:I,setAnnotations:M,annotations:E,recordHistory:X}),r=(0,oe.YB)(),Y=r.formatMessage({id:"pages.Maps.finished"}),$=r.formatMessage({id:"pages.Maps.removeLastVertex"}),w=r.formatMessage({id:"pages.Maps.cancel"}),q=r.formatMessage({id:"pages.Maps.boundary"}),_=r.formatMessage({id:"pages.Maps.remoteSensing"}),i=r.formatMessage({id:"pages.Maps.grids"}),t=r.formatMessage({id:"pages.toolBar.polygon"}),f=r.formatMessage({id:"pages.toolBar.rubber"}),p=r.formatMessage({id:"pages.toolBar.zoomIn"}),C=r.formatMessage({id:"pages.toolBar.zoomOut"}),S=r.formatMessage({id:"pages.toolBar.move"}),k=r.formatMessage({id:"pages.toolBar.unDo"}),Pe=r.formatMessage({id:"pages.toolBar.reDo"}),Me=r.formatMessage({id:"pages.toolBar.save"}),Re=r.formatMessage({id:"pages.toolBar.edit"}),be=r.formatMessage({id:"pages.toolBar.clearMark"}),Ce=r.formatMessage({id:"pages.toolBar.interactor"}),De=r.formatMessage({id:"pages.toolBar.segmentThreshold"}),Ie=r.formatMessage({id:"pages.toolBar.transparency"}),Be=r.formatMessage({id:"pages.toolBar.visualRadius"}),Oe=r.formatMessage({id:"pages.toolBar.determineOutline"}),Ne=r.formatMessage({id:"pages.toolBar.divideData"}),Le=r.formatMessage({id:"pages.toolBar.export"});return(0,e.jsxs)(de.Z,{className:y().segment,children:[(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(T.Z,{placement:"rightTop",visible:l.polyVisable,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(le.Z,{children:[(0,e.jsx)(j.Z,{type:"primary",onClick:function(){l.finishShape()},children:Y}),(0,e.jsx)(j.Z,{type:"primary",onClick:function(){l.removeLastVertex()},children:$}),(0,e.jsx)(ie.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,e.jsx)(j.Z,{type:"primary",onClick:function(){l.RSDrawDisable(l.currentShape())},children:w})})]})}),trigger:h=="Polygon"?"hover":"click",children:(0,e.jsx)(c.Z,{active:h=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){P("Polygon"),l.RSDraw("Polygon")},children:t})}),(0,e.jsx)(c.Z,{onClick:function(){l.editMode()},imgSrc:"./pics/buttons/edit.png",children:Re}),(0,e.jsxs)(T.Z,{placement:"rightTop",title:"title",content:"content",trigger:h=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){l.removeShape()},children:f})]}),(0,e.jsx)(c.Z,{onClick:function(){l.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:p}),(0,e.jsx)(c.Z,{onClick:function(){l.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:C}),(0,e.jsx)(c.Z,{onClick:function(){l.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:Me}),(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return l.moveShape()},children:S}),(0,e.jsx)(c.Z,{onClick:function(){return W()},imgSrc:"./pics/buttons/prev.png",children:k}),(0,e.jsx)(c.Z,{onClick:function(){return K()},imgSrc:"./pics/buttons/next.png",children:Pe}),(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:be})]}),(0,e.jsxs)("div",{className:y().mainStage,children:[(0,e.jsxs)("div",{className:y().draw,children:[(0,e.jsx)("div",{className:y().halfMap,children:(0,e.jsx)(ae.Z,{leafletMapRef:G,onShapeCreate:l.onShapeCreate,onShapeEdit:l.onShapeEdit})}),(0,e.jsx)("div",{className:y().interval}),(0,e.jsx)("div",{className:y().halfMap,children:(0,e.jsx)(ae.Z,{leafletMapRef:G,displayTools:!1,onShapeCreate:l.onShapeCreate,onShapeEdit:l.onShapeEdit})})]}),(0,e.jsx)("div",{className:y().pblock,children:(0,e.jsx)("div",{className:y().progress,children:(0,e.jsx)(se.Z,{percent:50,status:"active"})})})]}),(0,e.jsxs)(te.Z,{disLoc:"right",children:[(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:Ce}),(0,e.jsx)(Q.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:De}),(0,e.jsx)(Q.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:Ie}),(0,e.jsx)(Q.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:Be}),(0,e.jsxs)(T.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)(ve.Z,{}),trigger:h=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){P("boundry")},children:q})]}),(0,e.jsxs)(T.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,e.jsx)(pe,{}),trigger:h=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){P("colorgun")},children:_})]}),(0,e.jsxs)(T.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,e.jsx)(Se.Z,{}),trigger:h=="grid"?"click":"hover",children:[" ",(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){P("grid")},children:i})]}),(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/data_division.png",children:Ne}),(0,e.jsx)(c.Z,{imgSrc:"./pics/buttons/export.png",children:Le})]}),(0,e.jsxs)("div",{className:y().rightSideBar,children:[(0,e.jsx)("div",{className:y().determinOutline,children:(0,e.jsx)(j.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:Oe})}),(0,e.jsx)(me.Z,{selectedLabel:I,onLabelSelect:function(x){v(x),console.log(x)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(xe.Z,{annotations:E,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},Ze=ye}}]);
