(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[580],{91220:function(P,_,e){"use strict";e.d(_,{Z:function(){return f}});var C=e(64254);function f(d,u){var o;if(typeof Symbol=="undefined"||d[Symbol.iterator]==null){if(Array.isArray(d)||(o=(0,C.Z)(d))||u&&d&&typeof d.length=="number"){o&&(d=o);var E=0,a=function(){};return{s:a,n:function(){return E>=d.length?{done:!0}:{done:!1,value:d[E++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,M=!1,l;return{s:function(){o=d[Symbol.iterator]()},n:function(){var h=o.next();return c=h.done,h},e:function(h){M=!0,l=h},f:function(){try{!c&&o.return!=null&&o.return()}finally{if(M)throw l}}}}},41435:function(P,_,e){"use strict";e.d(_,{Z:function(){return E}});var C=e(94663),f=e(80112);function d(a){return Function.toString.call(a).indexOf("[native code]")!==-1}var u=e(18597);function o(a,c,M){return(0,u.Z)()?o=Reflect.construct:o=function(i,h,v){var D=[null];D.push.apply(D,h);var U=Function.bind.apply(i,D),O=new U;return v&&(0,f.Z)(O,v.prototype),O},o.apply(null,arguments)}function E(a){var c=typeof Map=="function"?new Map:void 0;return E=function(l){if(l===null||!d(l))return l;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c!="undefined"){if(c.has(l))return c.get(l);c.set(l,i)}function i(){return o(l,arguments,(0,C.Z)(this).constructor)}return i.prototype=Object.create(l.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),(0,f.Z)(i,l)},E(a)}},38619:function(P){P.exports={modal:"modal___2aO7U"}},41180:function(P){P.exports={ppcard:"ppcard___27hGd",title:"title___22R8f"}},48627:function(P){P.exports={container:"container___2RXc3"}},26389:function(P){P.exports={modal:"modal___2gJ6d"}},31982:function(P,_,e){"use strict";var C=e(89032),f=e(15746),d=e(11849),u=e(13062),o=e(71230),E=e(11700),a=e(67294),c=e(41180),M=e.n(c),l=e(85893),i=function(v){return(0,l.jsxs)("div",{className:M().ppcard,style:v.style,hidden:v.hidden,children:[(0,l.jsx)(o.Z,{className:M().titleRow,style:{display:v.title?void 0:"none"},children:(0,l.jsx)(E.Z,{className:M().title,children:v.title})}),(0,l.jsx)(o.Z,{style:{marginTop:26},children:(0,l.jsx)(f.Z,{span:24,style:(0,d.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},v.innerStyle),children:v.children})})]})};_.Z=i},11428:function(P,_,e){"use strict";var C=e(67294),f=e(48627),d=e.n(f),u=e(85893),o=function(a){return(0,u.jsx)("div",{className:"".concat(d().container),style:{backgroundImage:"url(./pics/background.png)"},children:a.children})};_.Z=o},36505:function(P,_,e){"use strict";e.d(_,{I:function(){return d}});var C=e(48971),f=e(85893),d=function(o){var E=(0,C.YB)();return function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,M=a==null||a==""?c:c+"."+a;return(0,f.jsx)("p",{"data-test-id":M,style:{display:"inline"},children:E.formatMessage({id:M})})}}},35261:function(P,_,e){"use strict";var C=e(71194),f=e(50146),d=e(49111),u=e(19650),o=e(47673),E=e(24044),a=e(34792),c=e(48086),M=e(57663),l=e(71577),i=e(9715),h=e(93766),v=e(2824),D=e(67294),U=e(26389),O=e.n(U),L=e(15156),z=e(36505),p=e(85893),V=function(G){var x=(0,z.I)("component.PPExportModal"),re=(0,D.useState)(!1),W=(0,v.Z)(re,2),J=W[0],F=W[1],r=(0,D.useState)(!1),K=(0,v.Z)(r,2),Y=K[0],R=K[1],H=h.Z.useForm(),Q=(0,v.Z)(H,1),b=Q[0];return(0,p.jsxs)("span",{hidden:G.visible==!1,children:[(0,p.jsx)(l.Z,{type:"primary",onClick:function(){return R(!0)},children:x("title")}),(0,p.jsx)(f.Z,{className:O().modal,title:x("title"),visible:Y,onCancel:function(){return R(!1)},footer:null,children:(0,p.jsxs)(h.Z,{form:b,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(Z){var I=Z.path;if(!I){c.default.error(x("nullPath"));return}F(!0),(0,L.Tr)(G.project.projectId,I).then(function(){c.default.success(x("exportSuccess"))}).catch(function(){}).finally(function(){F(!1)})},autoComplete:"off",children:[(0,p.jsx)(h.Z.Item,{label:x("path"),name:"path",children:(0,p.jsx)(E.Z,{})}),(0,p.jsx)(h.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,p.jsxs)(u.Z,{children:[(0,p.jsx)(l.Z,{onClick:function(){R(!1),b.resetFields()},children:x("cancel","global")}),(0,p.jsx)(l.Z,{type:"primary",htmlType:"submit",loading:J,children:x("export")})]})})]})})]})};_.Z=V},65732:function(P,_,e){"use strict";e.r(_),e.d(_,{default:function(){return Q}});var C=e(47673),f=e(24044),d=e(57663),u=e(71577),o=e(11849),E=e(34792),a=e(48086),c=e(3182),M=e(9715),l=e(93766),i=e(2824),h=e(43358),v=e(34041),D=e(94043),U=e.n(D),O=e(67294),L=e(48971),z=e(11428),p=e(31982),V=e(37071),A=e(15156),G=e(71194),x=e(50146),re=e(49111),W=e(19650),J=e(38619),F=e.n(J),r=e(85893),K=function(j){var Z=(0,L.YB)(),I=(0,O.useState)(!1),t=(0,i.Z)(I,2),N=t[0],g=t[1],$=Z.formatMessage({id:"component.PPCreater.cancel"}),X=l.Z.useForm(),k=(0,i.Z)(X,1),B=k[0];function w(){var m=j.project.otherSettings;return m!=null&&m.perviousModel&&m!==null&&m!==void 0&&m.models&&m!==null&&m!==void 0&&m.models[m==null?void 0:m.perviousModel]?!0:(a.default.error("Please set and save ML settings first!"),!1)}return(0,r.jsxs)("span",{hidden:j.visible==!1,children:[(0,r.jsx)(u.Z,{type:"primary",onClick:function(){w()&&g(!0)},children:"Train Model"}),(0,r.jsx)(x.Z,{className:F().modal,title:"Train Model",visible:N,onCancel:function(){return g(!1)},footer:null,children:(0,r.jsxs)(l.Z,{form:B,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(q){var ee=q.path;j.trainModel(ee),g(!1)},autoComplete:"off",children:[(0,r.jsx)(l.Z.Item,{label:"Dataset Path",name:"path",rules:[{required:!0,message:"Please input dataset path"}],children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)(l.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,r.jsxs)(W.Z,{children:[(0,r.jsx)(u.Z,{onClick:function(){g(!1),B.resetFields()},children:$}),(0,r.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"Train"})]})})]})})]})},Y=K,R=e(35261),H=function(){var j,Z,I,t=(0,A.Gd)(O.useState),N=V.Z.getQueryVariable("projectId"),g=(0,A.RZ)(O.useState),$=v.Z.Option,X=l.Z.useForm(),k=(0,i.Z)(X,1),B=k[0];(0,O.useEffect)(function(){function n(){return s.apply(this,arguments)}function s(){return s=(0,c.Z)(U().mark(function S(){var te,ne,T;return U().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,A.bo)();case 2:if(y.sent){y.next=4;break}return y.abrupt("return");case 4:if(t.getAll(),N){y.next=8;break}return a.default.error("Machine Learning settings are specific to every project. Please choose a project first."),y.abrupt("return");case 8:return y.next=10,t.getCurr(N);case 10:T=y.sent,T!=null&&(te=T.otherSettings)!==null&&te!==void 0&&te.mlBackendUrl&&g.setMlBackendUrl(T==null||(ne=T.otherSettings)===null||ne===void 0?void 0:ne.mlBackendUrl);case 12:case"end":return y.stop()}},S)})),s.apply(this,arguments)}n()},[]),(0,O.useEffect)(function(){if(!!t.curr){var n=t.curr.otherSettings?t.curr.otherSettings:{},s=n.models&&n.perviousModel?n.models[n.perviousModel]:{},S={mlBackendUrl:n.mlBackendUrl,modelName:n.perviousModel,trainBatchSize:s.trainBatchSize};B.setFieldsValue(S),n!=null&&n.mlBackendUrl&&g.setMlBackendUrl(n.mlBackendUrl)}},[t.curr]);function w(){if(!t.curr){a.default.error("Please choose a project first!");return}var n=B.getFieldValue("mlBackendUrl");g.setMlBackendUrl(n);var s=(0,o.Z)((0,o.Z)({},t.curr.otherSettings),{},{mlBackendUrl:n});t.update(t.curr.projectId,{otherSettings:s})}function m(n){if(console.log("saveMlsettings",t.curr,n),!t.curr){a.default.error("Please select model first!");return}t.curr.otherSettings||(t.curr.otherSettings={});var s=t.curr.otherSettings.models?t.curr.otherSettings.models:{};s[n.modelName]=n,t.curr.otherSettings.mlBackendUrl=B.getFieldValue("mlBackendUrl"),t.curr.otherSettings.perviousModel=n.modelName,t.curr.otherSettings.models=s,t.update(t.curr.projectId,{otherSettings:t.curr.otherSettings}),a.default.info("Ml setting saved. Let's start trainig or inference!")}function q(n){var s=t.curr.otherSettings;g.train(s.perviousModel,n,s.models[s.perviousModel])}function ee(){var n=t.curr.otherSettings;if(!n||!n.mlBackendUrl||!n.perviousModel){a.default.error("Please set and save ml settings first.");return}a.default.info("Running inference."),t.predict(t.curr.projectId,{mlBackendUrl:n.mlBackendUrl,model:n.perviousModel,sameServer:!1,createLabel:!0}).then(function(){a.default.info("Prediction Complete")})}return(0,r.jsxs)(z.Z,{children:[(0,r.jsxs)(p.Z,{children:["Project:",(0,r.jsx)(v.Z,{placeholder:"Select a project",onChange:function(s){return t.getCurr(s)},value:(j=t.curr)===null||j===void 0?void 0:j.projectId,children:(Z=t.all)===null||Z===void 0?void 0:Z.map(function(n){return(0,r.jsx)($,{value:n.projectId,children:n.name})})})]}),(0,r.jsxs)(p.Z,{hidden:t.curr==null,children:[(0,r.jsx)(Y,{model:g,project:t.curr,trainModel:q}),(0,r.jsx)(R.Z,{project:t.curr}),(0,r.jsx)(u.Z,{type:"primary",onClick:function(){var s,S;if(!((s=t.curr)!==null&&s!==void 0&&(S=s.otherSettings)!==null&&S!==void 0&&S.mlBackendUrl)){a.default.error("Set backend url first");return}window.open("".concat(t.curr.otherSettings.mlBackendUrl.replace("model","visualdl")),"_blank")},children:"Progress"}),(0,r.jsx)(u.Z,{type:"primary",onClick:ee,children:"Run Inference"})]}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(u.Z,{type:"primary",onClick:function(){console.log("pjid",t.curr.projectId),L.m8.push("/".concat(t.curr.taskCategory.name,"?projectId=").concat(t.curr.projectId))},children:"Label"}),(0,r.jsx)(u.Z,{type:"primary",onClick:function(){L.m8.push("/project_overview?projectId=".concat(t.curr.projectId))},children:"Project Overview"})]}),(0,r.jsx)(p.Z,{children:(0,r.jsxs)(l.Z,{form:B,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(s){console.log("form finish",s),m(s)},hidden:t.curr==null,children:[(0,r.jsxs)(f.Z.Group,{compact:!0,children:[(0,r.jsx)(l.Z.Item,{name:"mlBackendUrl",rules:[{required:!0,message:"Please input ml backend url"}],style:{fontSize:"1.5rem"},children:(0,r.jsx)(f.Z,{allowClear:!0,addonBefore:"ML Backend URL ",style:{textAlign:"left"}})}),(0,r.jsx)(u.Z,{type:"primary",onClick:w,children:"Set"})]}),(0,r.jsx)(l.Z.Item,{name:"modelName",label:"Model",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please select a model"}],style:{fontSize:"1.5rem"},children:(0,r.jsx)(v.Z,{placeholder:"Select a model",children:(I=g.all)===null||I===void 0?void 0:I.map(function(n){return(0,r.jsx)($,{value:n.name,children:n.name})})})}),(0,r.jsx)(l.Z.Item,{name:"trainBatchSize",label:"Training Batch Size",labelCol:{span:6},wrapperCol:{span:16},style:{fontSize:"1.5rem"},children:(0,r.jsx)(f.Z,{placeholder:"Training batch size"})}),(0,r.jsx)(l.Z.Item,{wrapperCol:{span:16,offset:6},children:(0,r.jsx)(u.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:"Save"})})]})})]})},Q=H}}]);
