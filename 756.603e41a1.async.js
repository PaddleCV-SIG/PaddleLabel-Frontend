(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[756],{13237:function(w){w.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___26yoA",toolBarButtonContainer:"toolBarButtonContainer___3TAcy",toolBarButton:"toolBarButton___utzQD",buttonText:"buttonText___10yo3",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___UC85Z",popover:"popover___V2uUa",slider:"slider___293AL",popoverLeft:"popoverLeft___2uQ3J"}},85024:function(w){w.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(w){w.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},26647:function(w){w.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},8978:function(w,q,e){"use strict";e.d(q,{Z:function(){return p}});var Y=e(11849),t0=e(2824),K=e(91220),F=e(67294),z=e(85893);function _(r){if(!r||!r.width||!r.color||!r.points||r.points.length<2||r.frontendId==null)return"";var A=r.type=="rubber"?0:r.frontendId;return"".concat(r.width,",").concat(A,",").concat(r.points.join(","))}function O(r){var A,s=r.canvasRef,E=r.annotation,l=E.result;if(!l)return(0,z.jsx)(z.Fragment,{});var U=(A=s.current)===null||A===void 0?void 0:A.getContext("2d");if(!U)return(0,z.jsx)(z.Fragment,{});for(var Z=[],i0=0,u=0;u<l.length;u++)l.at(u)==","?(Z.push(parseFloat(l.slice(i0,u))),i0=u+1):l.at(u)=="|"?(Z.push(parseFloat(l.slice(i0,u))),g(Z,U,E),Z=[],i0=u+1):u==l.length-1&&(Z.push(parseFloat(l.slice(i0,l.length))),g(Z,U,E));return(0,z.jsx)(z.Fragment,{})}function g(r,A,s){var E;if(r.length<4){console.log("found incorrect points:",r);return}var l=r[0],U=r[1];if(l==0){var Z;C(A,r.slice(2),(Z=s.label)===null||Z===void 0?void 0:Z.color);return}if(U==0){I(A,l,r.slice(2),void 0);return}I(A,l,r.slice(2),(E=s.label)===null||E===void 0?void 0:E.color)}function I(r,A,s,E){r.beginPath(),r.moveTo(s[0],s[1]);for(var l=0;l<=s.length/2-1;l++){var U=s[2*l],Z=s[2*l+1];r.lineTo(U,Z)}r.lineCap="round",r.lineJoin="round",r.lineWidth=A,E&&(r.strokeStyle=E),r.globalCompositeOperation=E?"source-over":"destination-out",r.stroke()}function C(r,A,s){console.log("renderPixel: ",A,s,r),r.globalCompositeOperation=s?"source-over":"destination-out",s&&(r.fillStyle=s);for(var E=0;E<=A.length/2-1;E++){var l=A[2*E],U=A[2*E+1];r.fillRect(l,U,1,1)}}function e0(r){if(!r||r.length==0)return 0;var A=0,s=(0,K.Z)(r),E;try{for(s.s();!(E=s.n()).done;){var l=E.value;l.frontendId>A&&(A=l.frontendId)}}catch(U){s.e(U)}finally{s.f()}return A}function X(r,A){return r=="rubber"||A==2?"rubber":"brush"}function p(r){var A=(0,F.useState)(),s=(0,t0.Z)(A,2),E=s[0],l=s[1],U=function(l0){var H,x;if(!(r.currentTool!="brush"&&r.currentTool!="rubber"||!((H=r.currentLabel)!==null&&H!==void 0&&H.color)||!r.brushSize)){var t=l0.mouseX,s0=l0.mouseY,d0=X(r.currentTool,l0.e.evt.button);console.log("frontendId: ",r.frontendIdOps.frontendId,"maxId:",e0(r.annotations));var N=r.frontendIdOps.frontendId>0?r.frontendIdOps.frontendId:e0(r.annotations)+1;N!=r.frontendIdOps.frontendId&&r.frontendIdOps.setFrontendId(N);var J=_({width:r.brushSize||10,color:(x=r.currentLabel)===null||x===void 0?void 0:x.color,points:[t,s0,t,s0],type:d0,frontendId:N});if(!!J){l(d0);var r0={dataId:r.dataId,label:r.currentLabel,labelId:r.currentLabel.labelId,frontendId:N,result:J,type:"brush"};r.onAnnotationAdd(r0)}}},Z=function(l0){var H;if(!(!E||!r.currentAnnotation||!r.currentAnnotation.result||r.currentAnnotation.result.length<2||!((H=r.currentLabel)!==null&&H!==void 0&&H.color))){var x=l0.mouseX,t=l0.mouseY,s0=r.currentAnnotation.result+",".concat(x,",").concat(t);r.onAnnotationModify((0,Y.Z)((0,Y.Z)({},r.currentAnnotation),{},{result:s0}))}},i0=function(){r.currentTool!="brush"&&r.currentTool!="rubber"||(l(void 0),r.onMouseUp())};return{onMouseDown:U,onMouseMove:Z,onMouseUp:i0,drawAnnotation:O}}},57406:function(w,q,e){"use strict";e.d(q,{pL:function(){return t0},oo:function(){return K}});var Y=e(91220);function t0(_){var O=0;if(!_)return O;var g=(0,Y.Z)(_),I;try{for(g.s();!(I=g.n()).done;){var C=I.value;!C||!C.frontendId||C.frontendId>O&&(O=C.frontendId)}}catch(e0){g.e(e0)}finally{g.f()}return O}function K(_){var O=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(_);return O?{r:parseInt(O[1],16),g:parseInt(O[2],16),b:parseInt(O[3],16)}:null}function F(_){var O=_.toString(16);return O.length==1?"0"+O:O}function z(_,O,g){return"#"+F(_)+F(O)+F(g)}},14836:function(w,q,e){"use strict";e.d(q,{Z:function(){return l0}});var Y=e(20228),t0=e(11382),K=e(54421),F=e(38272),z=e(57663),_=e(71577),O=e(91220),g=e(67294),I=e(56159),C=e.n(I),e0=e(49111),X=e(19650),p=e(2824),r=e(11849),A=e(85024),s=e.n(A),E=e(63097),l=e(85893),U=function(x){var t=(0,r.Z)({},x.annotation),s0=(0,g.useState)(t.invisible),d0=(0,p.Z)(s0,2),N=d0[0],J=d0[1],r0=(0,g.useState)(0),D=(0,p.Z)(r0,2),v0=D[0],Q=D[1];(0,g.useEffect)(function(){J(x.annotation.invisible)},[x.annotation.invisible]);var b0=(0,l.jsxs)(F.ZP.Item,{className:"".concat(s().listItem," ").concat(x.active?s().listItemActive:""),unselectable:"on",onClick:function(){x.onClick(t)},children:[(0,l.jsxs)(X.Z,{align:"center",size:5,children:[(0,l.jsx)("a",{className:s().eye,style:{backgroundImage:N?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(S0){S0.stopPropagation(),J(!N),x.onAnnotationModify(t)}})," ",(0,l.jsx)("span",{className:s().annotationId,children:t.frontendId}),(0,l.jsx)("span",{className:s().labelName,children:t.label.name}),(0,l.jsx)(E.Z,{color:t.label.color})]}),(0,l.jsx)("a",{className:s().delete,onClick:function(S0){S0.stopPropagation();var y0=new Date().getTime();y0-v0<300||(Q(y0),x.onAnnotationDelete(t))}})]});return b0},Z=U,i0=e(48971),u=function(x){var t=(0,i0.YB)(),s0=t.formatMessage({id:"component.PPAnnotationList.annotationList"}),d0=t.formatMessage({id:"component.PPAnnotationList.addAnnotation"}),N=new Set,J=[],r0=(0,O.Z)(x.annotations),D;try{for(r0.s();!(D=r0.n()).done;){var v0=D.value;N.has(v0.frontendId)||(J.push(v0),N.add(v0.frontendId))}}catch(Q){r0.e(Q)}finally{r0.f()}return(0,l.jsx)(t0.Z,{spinning:x.disabled,indicator:(0,l.jsx)(l.Fragment,{}),children:(0,l.jsx)(F.ZP,{className:C().labelList,size:"large",header:(0,l.jsx)("div",{className:C().listHeader,children:s0}),bordered:!0,dataSource:J,renderItem:function(b0){var g0;return(0,l.jsx)(Z,{onClick:x.disabled?function(){}:x.onAnnotationSelect,annotation:b0,active:x.disabled?!1:b0.frontendId==((g0=x.currAnnotation)===null||g0===void 0?void 0:g0.frontendId),onAnnotationDelete:x.onAnnotationDelete,onAnnotationModify:x.onAnnotationModify})},footer:function(){return x.onAnnotationAdd?(0,l.jsx)("div",{children:(0,l.jsx)(_.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){x.onAnnotationAdd()},block:!0,children:d0})}):(0,l.jsx)("div",{})}})})},l0=u},27992:function(w,q,e){"use strict";var Y=e(20136),t0=e(55241),K=e(13062),F=e(71230),z=e(77883),_=e(70507),O=e(89032),g=e(15746),I=e(66126),C=e(75454),e0=e(2824),X=e(67294),p=e(61541),r=e(26647),A=e.n(r),s=e(85893),E=0,l=100,U=10,Z=function(u){var l0=(0,X.useState)(r0(u.size)),H=(0,e0.Z)(l0,2),x=H[0],t=H[1];function s0(D){t(r0(D))}var d0=u.step?u.step:10,N=u.minSize==null?E:u.minSize,J=u.maxSize==null?l:u.maxSize;function r0(D){return D==null?U:D<=N?N:D>=J?J:D}return(0,X.useEffect)(function(){s0(u.size)},[u.size]),(0,s.jsxs)(t0.Z,{overlayClassName:"".concat(A().popover," ").concat(u.disLoc=="left"?A().popoverLeft:""),placement:u.disLoc||"right",content:(0,s.jsxs)(F.Z,{children:[(0,s.jsx)(g.Z,{span:16,children:(0,s.jsx)(C.Z,{className:A().slider,value:x,max:J,min:N,onChange:function(v0){var Q;(Q=u.onChange)===null||Q===void 0||Q.call(0,v0)},tooltipVisible:!1})}),(0,s.jsx)(g.Z,{span:8,children:(0,s.jsx)(_.Z,{min:N,max:J,value:x,onChange:function(v0){var Q;(Q=u.onChange)===null||Q===void 0||Q.call(0,v0)},step:d0})})]}),trigger:"hover",visible:u.disabled?!1:void 0,children:[" ",(0,s.jsx)(p.Z,{imgSrc:u.imgSrc||"",onClick:!u.disabled&&u.onClick||void 0,active:u.active,disabled:u.disabled,children:u.children})]})};q.Z=Z},10137:function(w,q,e){"use strict";var Y=e(34669),t0=e(54458),K=e(67294),F=e(15156),z=e(85893),_=function(g){var I,C,e0=(0,F.Ad)("pages.toolBar.progress");return(0,z.jsxs)("div",{className:"progress",children:[(0,z.jsx)(t0.Z,{className:"progressBar",percent:Math.ceil(g.project.finished/((I=g.task.all)===null||I===void 0?void 0:I.length)*100),status:"active",showInfo:!1})," ",(0,z.jsx)("span",{className:"progressDesc",children:"".concat(e0(""),": ").concat(g.project.finished||0,"/").concat((C=g.task.all)===null||C===void 0?void 0:C.length,`
        `).concat(e0("currentId"),": ").concat(g.task.currIdx==null?1:g.task.currIdx+1," ")})]})};q.Z=_},91861:function(w,q,e){"use strict";e.d(q,{Ad:function(){return F},k3:function(){return z},Vd:function(){return _},td:function(){return O}});var Y=e(34792),t0=e(48086),K=40;function F(){localStorage.removeItem("history"),z([])}function z(g){var I=localStorage.getItem("history"),C=I?JSON.parse(I):{index:-1,items:[]};if(JSON.stringify(C.items[C.index])!=JSON.stringify(g)){var e0=C.index>K?C.index-K:0,X=C.items.splice(e0,C.index==0?1:C.index+1);C.items=X.concat([g]),C.index<=K?C.index++:C.index=K+1,localStorage.setItem("history",JSON.stringify(C))}}function _(){var g=localStorage.getItem("history");if(!!g){var I=JSON.parse(g);if(!!I){if(I.index>=I.items.length-1){t0.default.error("No next history!");return}return I.index++,localStorage.setItem("history",JSON.stringify(I)),I.items[I.index]}}}function O(){var g=localStorage.getItem("history");if(!!g){var I=JSON.parse(g);if(console.log("history",I),!I||!I.index||I.index<=1){t0.default.error("No previous history!");return}return I.index--,localStorage.setItem("history",JSON.stringify(I)),I.items[I.index]}}},22756:function(w,q,e){"use strict";e.r(q),e.d(q,{MOST_HISTORY_STEPS:function(){return J0},default:function(){return G0}});var Y=e(11849),t0=e(57663),K=e(71577),F=e(3182),z=e(20228),_=e(11382),O=e(34792),g=e(48086),I=e(91220),C=e(2824),e0=e(94043),X=e.n(e0),p=e(67294),r=e(48971),A=e(8088),s=e(61541),E=e(44434),l=e(27992),U=e(5041),Z=e(57436),i0=e(14836),u=e(91861),l0=e(8978),H=e(65031),x=e(57406),t=e(85893);function s0(n,a){if(!(!n||!a))return a.join(",")}function d0(n){var a,o=n.annotation;if(!o||!o.result||o.result.length<2||!((a=o.label)!==null&&a!==void 0&&a.color))return(0,t.jsx)(t.Fragment,{});var v=o.result.split(",").map(Number),m=o.label.color,c=(0,x.oo)(m);if(!c)return(0,t.jsx)(t.Fragment,{});var b=.3,d=void 0,M=[];return v.forEach(function(P,S){if(!d){d=P;return}M.push((0,t.jsx)(H.Cd,{onMouseDown:function(){n.currentTool=="editor"&&n.onSelect(o)},draggable:n.currentTool=="editor",onDragMove:function(j){var T;j.cancelBubble=!0;var I0=(T=n.stageRef)===null||T===void 0?void 0:T.current,G=I0.findOne(".baseImage"),u0=!1,o0=j.target.x();o0>G.width()/2&&(o0=G.width()/2,u0=!0),o0<-G.width()/2&&(o0=-G.width()/2,u0=!0);var f0=j.target.y();f0>G.height()/2&&(f0=G.height()/2,u0=!0),f0<-G.height()/2&&(f0=-G.height()/2,u0=!0),u0&&j.target.setPosition({x:o0,y:f0}),v[S-1]=o0,v[S]=f0;var k=(0,Y.Z)((0,Y.Z)({},o),{},{result:v.join(",")});n.onDrag(k)},onMouseOver:function(){var j;n.currentTool=="editor"&&(j=n.stageRef)!==null&&j!==void 0&&j.current&&(n.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var j;(j=n.stageRef)!==null&&j!==void 0&&j.current&&(n.stageRef.current.container().style.cursor="default")},x:d,y:P,radius:5/n.scale,fill:m})),d=void 0}),(0,t.jsxs)(H.ZA,{children:[(0,t.jsx)(H.x1,{onMouseOver:function(){n.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){n.currentTool=="editor"&&n.onSelect(o)},stroke:m,strokeWidth:2/n.scale,globalCompositeOperation:"source-over",lineCap:"round",points:v,tension:0,closed:!0,fill:"rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", ").concat(b,")")}),M]},o.frontendId)}function N(n){var a=0;if(!n)return a;var o=(0,I.Z)(n),v;try{for(o.s();!(v=o.n()).done;){var m=v.value;!m||!m.frontendId||m.frontendId>a&&(a=m.frontendId)}}catch(c){o.e(c)}finally{o.f()}return a}function J(n){var a=function(b,d){var M,P,S=s0((M=n.currentLabel)===null||M===void 0?void 0:M.color,[b,d]);!S||(console.log(S),n.onAnnotationAdd({dataId:n.dataId,type:"polygon",frontendId:N(n.annotations)+1,label:n.currentLabel,labelId:(P=n.currentLabel)===null||P===void 0?void 0:P.labelId,result:S}))},o=function(b,d){var M;if(!(!n.currentAnnotation||!n.currentAnnotation.result||!((M=n.currentLabel)!==null&&M!==void 0&&M.color))){var P=n.currentAnnotation.result+",".concat(b,",").concat(d),S=(0,Y.Z)((0,Y.Z)({},n.currentAnnotation),{},{result:P});n.modifyAnnoByFrontendId(S)}},v=function(b){if(n.currentTool=="polygon"){var d=b.mouseX+b.offsetX,M=b.mouseY+b.offsetY;console.log("currentAnnotation:",n.currentAnnotation),n.currentAnnotation?o(d,M):a(d,M)}},m=function(){n.currentTool=="polygon"&&n.onMouseUp&&n.onMouseUp()};return{onMouseDown:v,onMouseMove:function(){},onMouseUp:m,drawAnnotation:d0}}var r0=e(10137),D=e(15156),v0=e(20136),Q=e(55241),b0=e(71194),g0=e(50146),S0=e(49111),y0=e(19650),ae=e(47673),j0=e(24044),ie=e(9715),C0=e(93766),O0="http://127.0.0.1:1234",F0=function(a){var o=C0.Z.useForm(),v=(0,C.Z)(o,1),m=v[0],c=(0,D.Ad)("component.PPInteractorModal"),b=a.model,d=a.project;(0,p.useEffect)(function(){var P,S,W,j;if(!!d.curr){var T=d.curr.otherSettings?d.curr.otherSettings:{},I0={mlBackendUrl:T.mlBackendUrl,mlModelAbsPath:(P=T.models)===null||P===void 0||(S=P.EISeg)===null||S===void 0?void 0:S.mlModelAbsPath,mlWeightAbsPath:(W=T.models)===null||W===void 0||(j=W.EISeg)===null||j===void 0?void 0:j.mlWeightAbsPath};m.setFieldsValue(I0),T!=null&&T.mlBackendUrl?b.setMlBackendUrl(T.mlBackendUrl):b.setMlBackendUrl(O0),T.mlModelAbsPath&&T.mlWeightAbsPath&&b.load(T.mlModelAbsPath,T.mlWeightAbsPath)}},[d.curr]);function M(P){console.log("saveMlsettings",d.curr,P),d.curr||g.default.error("Please select project first!"),d.curr.otherSettings||(d.curr.otherSettings={}),d.curr.otherSettings.mlBackendUrl=m.getFieldValue("mlBackendUrl"),d.curr.otherSettings.models={},d.curr.otherSettings.models.EISeg={},d.curr.otherSettings.models.EISeg.mlModelAbsPath=m.getFieldValue("mlModelAbsPath"),d.curr.otherSettings.models.EISeg.mlWeightAbsPath=m.getFieldValue("mlWeightAbsPath"),d.curr.otherSettings.perviousModel=P.modelName,d.update(d.curr.projectId,{otherSettings:d.curr.otherSettings}),b.setMlBackendUrl(d.curr.otherSettings.mlBackendUrl),a.model.setLoading(!0),b.load(d.curr.otherSettings.models.EISeg.mlModelAbsPath,d.curr.otherSettings.models.EISeg.mlWeightAbsPath).then(function(){g.default.info(c("modelLoaded")),a.model.setLoading(!1)},function(){a.model.setLoading(!1)})}return(0,t.jsx)(g0.Z,{title:c("title"),visible:a.visible,onCancel:a.onCancel,footer:null,width:"60rem",children:(0,t.jsxs)(C0.Z,{form:m,name:"basic",labelCol:{span:8},wrapperCol:{span:16},onFinish:function(S){console.log("form finish",S),M(S),a.setVisible(!1)},autoComplete:"off",children:[(0,t.jsx)(C0.Z.Item,{name:"mlBackendUrl",label:c("mlBackendUrl"),labelCol:{span:6},wrapperCol:{span:18},initialValue:O0,style:{fontSize:"1.5rem"},children:(0,t.jsx)(j0.Z,{placeholder:O0})}),(0,t.jsx)(C0.Z.Item,{name:"mlModelAbsPath",label:c("modelPath"),labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,t.jsx)(j0.Z,{placeholder:c("pathPh")})}),(0,t.jsx)(C0.Z.Item,{name:"mlWeightAbsPath",label:c("weightPath"),labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,t.jsx)(j0.Z,{placeholder:c("pathPh")})}),(0,t.jsx)(C0.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,t.jsxs)(y0.Z,{children:[(0,t.jsx)(K.Z,{onClick:function(){var S;(S=a.onCancel)===null||S===void 0||S.call(0)},children:c("cancel","global")}),(0,t.jsx)(K.Z,{type:"primary",htmlType:"submit",children:c("ok","global")})]})})]})})},p0=F0,W0=e(13237),D0=e.n(W0),k0=function(a){var o=(0,D.Ad)("component.PPInteractorModal"),v=a.model,m=a.project,c=(0,p.useState)(!1),b=(0,C.Z)(c,2),d=b[0],M=b[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Q.Z,{overlayClassName:"".concat(D0().popover," ").concat(D0().popoverLeft),placement:"left",content:(0,t.jsx)(K.Z,{onClick:function(){return M(!0)},type:"primary",style:{height:"2.5rem"},block:!0,children:o("title")}),trigger:"hover",children:[" ",(0,t.jsx)(s.Z,{imgSrc:a.imgSrc||"",onClick:a.onClick,active:a.active,children:a.children})]}),(0,t.jsx)(p0,{visible:d,setVisible:M,model:v,project:m,onCancel:function(){M(!1)}})]})},z0=k0,le={result:[[.3779466152191162,.38711845874786377,.36106088757514954,.35420000553131104,.35632404685020447,.36673659086227417,.3709605634212494,.33228039741516113,.3710925579071045,.3494248390197754,.34312722086906433,.3462066650390625,.3746175765991211,.3791941702365875,.4216013550758362,.44569116830825806,.40616583824157715,.4613204002380371,.49154922366142273,.4584124684333801,.4600294828414917,.4803354740142822,.46287786960601807,.43543994426727295,.43747758865356445,.4064893126487732,.3941977620124817,.39790475368499756,.39159834384918213,.3925873935222626,.3789200186729431,.36321160197257996],[.3818621039390564,.3770502805709839,.36075377464294434,.3548894226551056,.3503073453903198,.335567444562912,.3341645896434784,.33101293444633484,.3728009760379791,.364932656288147,.37297818064689636,.37586647272109985,.3893028497695923,.39986884593963623,.41131657361984253,.4522101581096649,.4333687722682953,.5002316832542419,.4971569776535034,.473648339509964,.4820094704627991,.46783292293548584,.4617140591144562,.44852927327156067,.44560548663139343,.44700291752815247,.4248964786529541,.44343101978302,.41931068897247314,.43451547622680664,.4378070831298828,.3568068742752075],[.3652324676513672,.35223522782325745,.35097530484199524,.360146701335907,.36671239137649536,.3395833373069763,.35282737016677856,.33361345529556274,.377223938703537,.38735657930374146,.39466923475265503,.3888944387435913,.3632313311100006,.3888370096683502,.4123692810535431,.41089701652526855,.4431883990764618,.5125359296798706,.5071693658828735,.47963064908981323,.46734818816185,.4608532786369324,.4394238293170929,.40698742866516113,.42963457107543945,.4184359908103943,.39965513348579407,.4161875247955322,.4067150950431824,.45255592465400696,.44494757056236267,.34891369938850403],[.364960253238678,.3754047155380249,.3721790313720703,.37246841192245483,.3652416467666626,.32984012365341187,.3496708571910858,.3422262966632843,.3380891978740692,.3428453207015991,.36001724004745483,.36075884103775024,.36690282821655273,.375881552696228,.3909446597099304,.3976140320301056,.43047186732292175,.5223039984703064,.5174918174743652,.5091606974601746,.4703259766101837,.46562325954437256,.4584425091743469,.4025508463382721,.4088236391544342,.41495299339294434,.41274765133857727,.394614577293396,.3999204635620117,.43086522817611694,.443092942237854,.3433324098587036],[.34178581833839417,.3906759023666382,.3692866563796997,.361131876707077,.3499326705932617,.3162209391593933,.31167617440223694,.3333600163459778,.3163505494594574,.338070273399353,.35670241713523865,.3636510670185089,.35625404119491577,.35763710737228394,.38493406772613525,.39124634861946106,.4325636029243469,.5645959973335266,.5685874223709106,.5350329279899597,.4992934465408325,.4620708227157593,.45242631435394287,.41027894616127014,.4038461744785309,.3944956958293915,.39921683073043823,.3937588334083557,.38950315117836,.3928646147251129,.4300973415374756,.33759239315986633],[.34255340695381165,.384326696395874,.35354241728782654,.32820284366607666,.34075650572776794,.310611367225647,.3198155462741852,.3376222848892212,.3267553746700287,.33798253536224365,.3261478543281555,.3417035639286041,.34279346466064453,.3464927673339844,.3819480240345001,.3768705129623413,.43024203181266785,.5799015164375305,.5669912099838257,.5345537066459656,.5366686582565308,.5029425621032715,.4881816804409027,.4266446828842163,.3896041512489319,.38750505447387695,.3878398835659027,.401533305644989,.38611483573913574,.4102136492729187,.43251603841781616,.3381301164627075],[.34610551595687866,.37768492102622986,.3577062487602234,.321483314037323,.3238357901573181,.31036683917045593,.32922878861427307,.33748194575309753,.34403321146965027,.3489550054073334,.32951661944389343,.35581493377685547,.3549908995628357,.34664082527160645,.37512969970703125,.37657931447029114,.4325118064880371,.6002883911132812,.5718269348144531,.5072413086891174,.5073626041412354,.5133922100067139,.48958104848861694,.45026227831840515,.41855117678642273,.38928452134132385,.3869919180870056,.3884861171245575,.38088345527648926,.4067824184894562,.42561301589012146,.3727574646472931],[.36236464977264404,.38462936878204346,.33172523975372314,.2767360210418701,.28566184639930725,.29154667258262634,.32516488432884216,.3253626823425293,.30838415026664734,.3315502405166626,.3262888789176941,.3520568013191223,.35253870487213135,.3447986841201782,.3818697929382324,.3651794195175171,.4231885075569153,.5827294588088989,.5951063632965088,.6352673768997192,.5757752656936646,.48387131094932556,.46553540229797363,.4512472450733185,.44570550322532654,.4316057562828064,.41964590549468994,.3941313624382019,.37175554037094116,.3886064291000366,.40585458278656006,.3790917694568634],[.35083019733428955,.3677082061767578,.33382877707481384,.3098861575126648,.3019915223121643,.3109188377857208,.3330777883529663,.331575870513916,.31939375400543213,.34113019704818726,.34969979524612427,.3529251217842102,.36156511306762695,.35511070489883423,.37965914607048035,.37223300337791443,.4537010192871094,.5680437088012695,.6448143720626831,.7226863503456116,.729232907295227,.6868923902511597,.5698102116584778,.4619525372982025,.46818724274635315,.43513986468315125,.42044782638549805,.3994002342224121,.39396214485168457,.3904518187046051,.40890100598335266,.3930703103542328],[.3359583914279938,.3705343008041382,.35527661442756653,.3399384319782257,.34458956122398376,.3259856700897217,.347974956035614,.3495017886161804,.3527892231941223,.35826316475868225,.35742005705833435,.335483193397522,.34679195284843445,.36213573813438416,.38948914408683777,.3846794366836548,.4752236008644104,.5317398905754089,.6341782212257385,.7260967493057251,.7400858402252197,.7263891696929932,.6071794629096985,.49351879954338074,.4718652367591858,.4380945563316345,.44395726919174194,.42750805616378784,.4137647747993469,.41625750064849854,.42252638936042786,.4066489040851593],[.3289949595928192,.37435805797576904,.3653024733066559,.34567791223526,.37014514207839966,.36809563636779785,.36826398968696594,.32743436098098755,.3298226594924927,.34234797954559326,.34268611669540405,.3254646956920624,.3090794086456299,.3477054834365845,.37110430002212524,.3621593713760376,.4475082755088806,.487918496131897,.601881742477417,.6983312964439392,.7557751536369324,.7451871633529663,.5793305039405823,.4939006268978119,.47265419363975525,.42300844192504883,.43300366401672363,.41770070791244507,.414137601852417,.42620089650154114,.41289666295051575,.4050122797489166],[.2583468556404114,.3622201085090637,.3609732985496521,.35103529691696167,.3431868553161621,.36043819785118103,.3594401776790619,.33510416746139526,.31773367524147034,.32706841826438904,.33306169509887695,.329282283782959,.3103845715522766,.3467973470687866,.36439552903175354,.35807719826698303,.40837693214416504,.46938514709472656,.6127392053604126,.7233112454414368,.7669434547424316,.7611733675003052,.5953957438468933,.5389460921287537,.4672558009624481,.42192357778549194,.42329633235931396,.42473718523979187,.40417638421058655,.408004492521286,.4068392515182495,.45992550253868103],[.26873499155044556,.3717286288738251,.3643631339073181,.3532456159591675,.3495698571205139,.3619597554206848,.3786068260669708,.3432343006134033,.3145405650138855,.32395321130752563,.33640119433403015,.33749133348464966,.31600821018218994,.3369048535823822,.3504919409751892,.34988847374916077,.3846014440059662,.4548245966434479,.6552940011024475,.7398929595947266,.7898313999176025,.7753756642341614,.6361410617828369,.550889790058136,.4542275369167328,.41850578784942627,.4201924800872803,.4233487844467163,.4089168310165405,.40734779834747314,.4125276207923889,.45579835772514343],[.2889721095561981,.3404158651828766,.34746238589286804,.3323819637298584,.36239108443260193,.36021608114242554,.3564058542251587,.34031766653060913,.3106665015220642,.32129210233688354,.32644376158714294,.3231737017631531,.30393165349960327,.34000542759895325,.3698198199272156,.3764057457447052,.37690526247024536,.44695284962654114,.6244124174118042,.7085537910461426,.7864880561828613,.7922757267951965,.6478504538536072,.5585101842880249,.46907946467399597,.43042469024658203,.4196140766143799,.4143720269203186,.41768819093704224,.4123932123184204,.40979909896850586,.40944749116897583],[.33511802554130554,.3354792892932892,.3483961820602417,.3393648862838745,.36110979318618774,.37371599674224854,.3693099021911621,.3380741477012634,.31597936153411865,.3110752999782562,.3071911334991455,.29553914070129395,.28971895575523376,.3283897936344147,.3738657832145691,.359753280878067,.37170153856277466,.45006322860717773,.622103214263916,.7240833044052124,.8724844455718994,.8468523025512695,.6292383670806885,.5481832027435303,.47547808289527893,.4294469654560089,.4108424484729767,.4051211476325989,.4253206253051758,.42601343989372253,.4097977876663208,.3356857895851135],[.3555319011211395,.3408556282520294,.35363197326660156,.3417183756828308,.3509896397590637,.38215622305870056,.41220414638519287,.3597573935985565,.3141809105873108,.299405962228775,.2974483370780945,.2919771671295166,.2913997769355774,.32095572352409363,.373879075050354,.3556964099407196,.3629939556121826,.47226566076278687,.6256035566329956,.7390267252922058,.8593417406082153,.8262102603912354,.6343622803688049,.5576579570770264,.4742991030216217,.41313984990119934,.3864082098007202,.3817637264728546,.4082636833190918,.41419312357902527,.4119032323360443,.2635403275489807],[.3506373465061188,.32203149795532227,.34963458776474,.32425546646118164,.33225691318511963,.35579705238342285,.38111579418182373,.3564165532588959,.3126765489578247,.3007081151008606,.30092623829841614,.30085325241088867,.2974894046783447,.326341450214386,.36822161078453064,.35820019245147705,.3826185166835785,.4894598424434662,.6533626317977905,.70644211769104,.7451343536376953,.7429384589195251,.6669357419013977,.5394930243492126,.45886534452438354,.41244491934776306,.39533960819244385,.370727002620697,.386724591255188,.3909628987312317,.40651923418045044,.24896344542503357],[.3370128571987152,.30008041858673096,.3007066547870636,.2964634597301483,.31920456886291504,.3513490855693817,.3618793785572052,.3482736349105835,.3220705986022949,.3098466992378235,.306601345539093,.30917924642562866,.32083860039711,.33934545516967773,.3853139877319336,.3959599435329437,.42794349789619446,.5098592042922974,.6510905027389526,.7034169435501099,.7345707416534424,.7295455932617188,.6945785880088806,.5392878651618958,.46230608224868774,.4132283627986908,.40620577335357666,.39428097009658813,.39259806275367737,.38836321234703064,.3802737891674042,.2869125008583069],[.3107353448867798,.28716710209846497,.2810332477092743,.28914326429367065,.3127279281616211,.349570631980896,.35278424620628357,.3424120545387268,.3312514126300812,.3183543384075165,.31009000539779663,.3195717930793762,.31631040573120117,.32442909479141235,.3819769620895386,.39367008209228516,.41426554322242737,.48430579900741577,.6400377750396729,.682829737663269,.7346150875091553,.7265263199806213,.6635222434997559,.5312811732292175,.4713155925273895,.40454715490341187,.41512030363082886,.4182337820529938,.39747387170791626,.3760755658149719,.3628138303756714,.3463020622730255],[.30060598254203796,.3060090243816376,.3139290511608124,.3145269751548767,.30912041664123535,.35013264417648315,.35046622157096863,.33206114172935486,.322023868560791,.3207645118236542,.3205072283744812,.32279807329177856,.3099812865257263,.3307061493396759,.3545922636985779,.3684121072292328,.39094099402427673,.43648841977119446,.6046525239944458,.6440432071685791,.6817156672477722,.6866225600242615,.6455923318862915,.5251345634460449,.4481634497642517,.4150755703449249,.4251801371574402,.404987633228302,.37328672409057617,.36327677965164185,.3602195680141449,.3206213116645813],[.30405154824256897,.3178442716598511,.33336877822875977,.3373711109161377,.32321715354919434,.3630528748035431,.3537922501564026,.3336135447025299,.30300673842430115,.31718388199806213,.3529442846775055,.34015488624572754,.3124402165412903,.3555675745010376,.35390767455101013,.37345024943351746,.4144602119922638,.44640690088272095,.573625922203064,.6119270324707031,.6456900835037231,.6455104351043701,.5934235453605652,.484555721282959,.4161651134490967,.3811432719230652,.3861028552055359,.3659202456474304,.34390294551849365,.3247116208076477,.3456142544746399,.32664284110069275],[.2826228737831116,.2938840985298157,.30609411001205444,.29632243514060974,.2861210107803345,.30216431617736816,.28895461559295654,.2819651961326599,.2588002383708954,.30655887722969055,.34061241149902344,.32973647117614746,.3005189895629883,.29779112339019775,.2948862910270691,.3190575838088989,.3858416974544525,.4116919934749603,.5491650104522705,.5732342004776001,.5938672423362732,.5976152420043945,.5155865550041199,.45706799626350403,.3356960117816925,.31694191694259644,.3380652368068695,.3176265358924866,.315368115901947,.3020714521408081,.3154049515724182,.32578057050704956]]};function N0(n){if(!n)return"";var a=document.createElement("canvas");a.width=n.width,a.height=n.height;var o=a.getContext("2d");o==null||o.drawImage(n,0,0);var v=a.toDataURL("image/png");return v.replace(/^data:image\/(png|jpg);base64,/,"")}function $0(n){var a,o,v=n.canvasRef;if(!n.interactorData||!((a=n.label)!==null&&a!==void 0&&a.color))return(0,t.jsx)(t.Fragment,{});var m=n.interactorData.predictData,c=(o=v.current)===null||o===void 0?void 0:o.getContext("2d");return c?(console.log("PPInteractor.drawAnnotation",n.interactorData),V0(_0(m,n.threshold),c,n.label.color),K0(n.interactorData.mousePoints,c,n.radius||10),(0,t.jsx)(t.Fragment,{})):(0,t.jsx)(t.Fragment,{})}function K0(n,a,o){if(!!n){var v=(0,I.Z)(n),m;try{for(v.s();!(m=v.n()).done;){var c=m.value,b=(0,C.Z)(c,3),d=b[0],M=b[1],P=b[2];a.beginPath(),P?a.fillStyle="#FF0000":a.fillStyle="#008000",a.beginPath(),a.arc(d,M,o,0,2*Math.PI),a.lineWidth=2,a.fill(),a.strokeStyle="#FFF",a.beginPath(),a.arc(d,M,o,0,2*Math.PI),a.stroke()}}catch(S){v.e(S)}finally{v.f()}}}function _0(n,a){var o=a?a*.01:.5,v=[],m=0,c=(0,I.Z)(n),b;try{for(c.s();!(b=c.n()).done;){var d=b.value,M=0,P=(0,I.Z)(d),S;try{for(P.s();!(S=P.n()).done;){var W=S.value;W>=o&&v.push(M,m),M++}}catch(j){P.e(j)}finally{P.f()}m++}}catch(j){c.e(j)}finally{c.f()}return v}function H0(n,a,o,v,m){if(!v||!m||!o)return null;var c=_0(o,n),b=0,d=Z0(a),M="".concat(b,",").concat(d,",")+c.join(","),P={dataId:v,label:m,labelId:m.labelId,frontendId:d,result:M,type:"brush"};return P}function V0(n,a,o){if(n.length<4){console.log("found incorrect points:",n);return}Y0(a,n.slice(2),o)}function Y0(n,a,o){n.globalCompositeOperation=o?"source-over":"destination-out",o&&(n.fillStyle=o);for(var v=0;v<=a.length/2-1;v++){var m=a[2*v],c=a[2*v+1];n.fillRect(m,c,1,1)}}function Z0(n){if(!n||n.length==0)return 0;var a=0,o=(0,I.Z)(n),v;try{for(o.s();!(v=o.n()).done;){var m=v.value;m.frontendId>a&&(a=m.frontendId)}}catch(c){o.e(c)}finally{o.f()}return a}function X0(n){var a=(0,r.tT)("InteractorData"),o=a.interactorData,v=a.setInteractorData,m=n.model,c=(0,D.Ad)("pages.toolBar"),b=function(){var P=(0,F.Z)(X().mark(function S(W){var j,T,I0,G,u0,o0;return X().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(n.currentTool=="interactor"){k.next=2;break}return k.abrupt("return");case 2:if((j=n.currentLabel)!==null&&j!==void 0&&j.color){k.next=5;break}return g.default.error(c("chooseCategoryFirst")),k.abrupt("return");case 5:if(T=Math.round(W.mouseX),I0=Math.round(W.mouseY),G=n.frontendIdOps.frontendId>0?n.frontendIdOps.frontendId:Z0(n.annotations)+1,G!=n.frontendIdOps.frontendId&&n.frontendIdOps.setFrontendId(G),o.mousePoints.push(new Array(T,I0,W.e.evt.button!=2)),!(!o.mousePoints.length||!W.stageRef.current||G==null)){k.next=12;break}return k.abrupt("return");case 12:return u0=N0(W.img),k.next=15,m.predict({format:"b64",img:u0,other:{clicks:o.mousePoints}});case 15:if(o0=k.sent,o0){k.next=18;break}return k.abrupt("return");case 18:v({active:!0,mousePoints:o.mousePoints,predictData:o0.result});case 19:case"end":return k.stop()}},S)}));return function(W){return P.apply(this,arguments)}}(),d=function(){},M=function(){n.currentTool=="interactor"&&n.onMouseUp()};return{onMouseDown:b,onMouseMove:d,onMouseUp:M,drawAnnotation:$0}}var J0=40,Q0=function(){var a,o=(0,D.Ad)("pages.toolBar"),v=(0,p.useState)(0),m=(0,C.Z)(v,2),c=m[0],b=m[1],d=(0,p.useState)(10),M=(0,C.Z)(d,2),P=M[0],S=M[1],W=(0,p.useState)(50),j=(0,C.Z)(W,2),T=j[0],I0=j[1],G=(0,p.useState)(60),u0=(0,C.Z)(G,2),o0=u0[0],f0=u0[1],k=(0,r.tT)("VisualRadius"),w0=k.radius,q0=k.setRadius,U0=(0,r.tT)("InteractorData"),L=U0.interactorData,M0=U0.setInteractorData,x0=(0,D.RZ)(p.useState),m0=(0,D.$L)(p.useState,p.useEffect,{effectTrigger:{postTaskChange:function(i,y){(0,u.Ad)(),(0,u.k3)({annos:y}),console.log("allAnns",y)}},label:{oneHot:!0,postSelect:function(){f.setCurr(void 0),b(0)},preUnsetCurr:te},tool:{defaultTool:"mover"},task:{push:!0}}),B=m0.tool,ee=m0.loading,E0=m0.scale,f=m0.annotation,L0=m0.task,a0=m0.data,A0=m0.project,c0=m0.label,ne=m0.refreshVar;function te(){f.setCurr(void 0),b(0)}var R=function(i){f.setCurr(i),i!=null&&i.frontendId?b(i.frontendId):b(0)},B0=function(){if(L.active){var i;console.log(B.curr);var y=H0(T,f.all,L==null?void 0:L.predictData,(i=a0.curr)===null||i===void 0?void 0:i.dataId,c0.curr);if(y){var V,n0=f.all.concat([y]);f.setAll(n0),R(y),f.pushToBackend((V=a0.curr)===null||V===void 0?void 0:V.dataId,n0)}M0({active:!0,predictData:[],mousePoints:[]}),R(void 0)}};(0,p.useEffect)(function(){(0,u.Ad)()},[]),(0,p.useEffect)(function(){var h=setInterval(function(){var i;console.log("triggered!",a0),f.pushToBackend((i=a0.curr)===null||i===void 0?void 0:i.dataId)},2e4);return function(){clearInterval(h)}},[f,a0,a0.curr]);var re=function(i){!i||(f.all.pop(),f.all.push(i),R(i),f.setAll(f.all))},R0=function(i){var y=[],V=(0,I.Z)(f.all),n0;try{for(V.s();!(n0=V.n()).done;){var h0=n0.value;h0.frontendId==i.frontendId?y.push(i):y.push(h0)}}catch(P0){V.e(P0)}finally{V.f()}R(i),f.setAll(y)},T0={dataId:(a=a0.curr)===null||a===void 0?void 0:a.dataId,currentLabel:c0.curr,brushSize:P,scale:E0.curr,currentTool:B.curr,annotations:f.all,currentAnnotation:f.curr,onAnnotationAdd:function(i){var y=f.all.concat([i]);f.setAll(y),R(i)},onAnnotationModify:re,modifyAnnoByFrontendId:R0,onMouseUp:function(){var i;L.active||((0,u.k3)({annos:f.all,currAnno:f.curr}),f.pushToBackend((i=a0.curr)===null||i===void 0?void 0:i.dataId,f.all))},frontendIdOps:{frontendId:c,setFrontendId:b},model:x0},oe={polygon:J(T0),brush:(0,l0.Z)(T0),interactor:X0(T0)};return(0,t.jsxs)(A.Z,{className:"segment",children:[(0,t.jsxs)(E.Z,{children:[(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/polygon.png",active:B.curr=="polygon",disabled:L.active,onClick:function(){if(!c0.curr){g.default.error(o("chooseCategoryFirst"));return}B.setCurr("polygon"),R(void 0)},children:o("polygon")}),(0,t.jsx)(s.Z,{active:B.curr=="editor",disabled:L.active,imgSrc:"./pics/buttons/edit.png",onClick:function(){B.setCurr("editor"),R(void 0)},children:o("edit")}),(0,t.jsx)(l.Z,{imgSrc:"./pics/buttons/brush.png",size:P,active:B.curr=="brush",disabled:L.active,onClick:function(){if(!c0.curr){g.default.error(o("chooseCategoryFirst"));return}B.curr!="rubber"&&B.curr!="brush"&&R(void 0),B.setCurr("brush")},onChange:function(i){S(i)},children:o("brush")}),(0,t.jsx)(l.Z,{size:P,active:B.curr=="rubber",disabled:L.active,onClick:function(){B.curr!="rubber"&&B.curr!="brush"&&R(void 0),B.setCurr("rubber")},onChange:function(i){S(i)},imgSrc:"./pics/buttons/rubber.png",children:o("rubber")}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){E0.change(.1)},children:o("zoomIn")}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){E0.change(-.1)},children:o("zoomOut")}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){var i;f.pushToBackend((i=a0.curr)===null||i===void 0?void 0:i.dataId)},disabled:L.active,children:o("save")}),(0,t.jsx)(s.Z,{active:B.curr=="mover",imgSrc:"./pics/buttons/move.png",onClick:function(){B.curr=="mover"?L.active?B.setCurr("interactor"):B.setCurr(void 0):B.setCurr("mover")},children:o("move")}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){var i=(0,u.td)();if(i){var y;f.setAll(i.annos),R(i.currAnno),f.pushToBackend((y=a0.curr)===null||y===void 0?void 0:y.dataId,i.annos)}},disabled:L.active,children:o("unDo")}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){var i=(0,u.Vd)();if(i){var y;f.pushToBackend((y=a0.curr)===null||y===void 0?void 0:y.dataId,i.annos),R(i.currAnno)}},disabled:L.active,children:o("reDo")}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",onClick:function(){f.setCurr(void 0),f.clear(),(0,u.k3)({annos:[]})},disabled:L.active,children:o("clearMark")})]}),(0,t.jsxs)("div",{id:"dr",className:"mainStage",children:[(0,t.jsxs)(_.Z,{tip:"loading",spinning:!!ee.curr,children:[(0,t.jsx)("div",{className:"draw",children:(0,t.jsx)(Z.Z,{scale:E0.curr,annotations:f.all,currentTool:B.curr,currentAnnotation:f.curr,currentLabel:c0.curr,setCurrentAnnotation:R,onAnnotationModify:R0,onAnnotationModifyComplete:function(){L.active||(0,u.k3)({annos:f.all,currAnno:f.curr})},frontendIdOps:{frontendId:c,setFrontendId:b},imgSrc:a0.imgSrc,transparency:o0,threshold:T,onAnnotationAdd:function(i){var y=f.all.concat([i]);f.setAll(y),f.curr||R(i)},drawTool:oe,refresh:ne})}),(0,t.jsx)("div",{className:"prevTask",onClick:function(){L.active&&B0(),!!L0.prevTask()&&(R(void 0),L.active||M0({active:!1,predictData:[],mousePoints:[]}))}}),(0,t.jsx)("div",{className:"nextTask",onClick:function(){L.active&&B0(),!!L0.nextTask()&&(R(void 0),L.active||M0({active:!1,predictData:[],mousePoints:[]}))}})]}),(0,t.jsx)("div",{className:"pblock",children:(0,t.jsx)(r0.Z,{task:L0,project:A0})})]}),(0,t.jsxs)(E.Z,{disLoc:"right",children:[(0,t.jsx)(z0,{imgSrc:"./pics/buttons/intelligent_interaction.png",active:L.active,onClick:(0,F.Z)(X().mark(function h(){var i,y,V,n0,h0;return X().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!x0.loading){$.next=3;break}return g.default.error(o("modelLoading")),$.abrupt("return");case 3:if(!L.active){$.next=8;break}B.setCurr(void 0),M0({active:!1,predictData:[],mousePoints:[]}),$.next=20;break;case 8:if(h0=A0.curr.otherSettings?A0.curr.otherSettings:{},!((i=h0.models)!==null&&i!==void 0&&(y=i.EISeg)!==null&&y!==void 0&&y.mlModelAbsPath&&(V=h0.models)!==null&&V!==void 0&&(n0=V.EISeg)!==null&&n0!==void 0&&n0.mlWeightAbsPath)){$.next=18;break}return $.prev=10,$.next=13,x0.load(h0.models.EISeg.mlModelAbsPath,h0.models.EISeg.mlWeightAbsPath);case 13:$.next=18;break;case 15:return $.prev=15,$.t0=$.catch(10),$.abrupt("return");case 18:B.setCurr("interactor"),M0({active:!0,predictData:[],mousePoints:[]});case 20:case"end":return $.stop()}},h,null,[[10,15]])})),model:x0,project:A0,children:o("interactor")}),(0,t.jsx)(l.Z,{disabled:!L.active,imgSrc:"./pics/buttons/threshold.png",disLoc:"left",size:T,maxSize:100,minSize:10,step:10,onChange:function(i){I0(i)},children:o("segmentThreshold")}),(0,t.jsx)(l.Z,{disabled:!L.active,imgSrc:"./pics/buttons/radius.png",disLoc:"left",size:w0,maxSize:50,minSize:5,step:5,onChange:function(i){q0(i)},children:o("visualRadius")}),(0,t.jsx)(l.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",size:o0,maxSize:100,minSize:0,onChange:function(i){f0(i)},children:o("transparency")}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){r.m8.push("/project_overview?projectId=".concat(A0.curr.projectId))},children:o("projectOverview")})]}),(0,t.jsxs)("div",{className:"rightSideBar",children:[(0,t.jsx)("div",{className:"determinOutline",children:(0,t.jsx)(K.Z,{disabled:B.curr!="interactor",style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){B0()},children:o("determineOutline")})}),(0,t.jsx)(U.Z,{hideColorPicker:!1,labels:c0.all,activeIds:c0.activeIds,onLabelSelect:c0.onSelect,onLabelModify:function(){},onLabelDelete:c0.remove,onLabelAdd:function(i){c0.create((0,Y.Z)((0,Y.Z)({},i),{},{projectId:A0.curr.projectId})).then(function(y){R(void 0),c0.setCurr(y)})}}),(0,t.jsx)(i0.Z,{currAnnotation:f.curr,annotations:f.all,onAnnotationSelect:function(i){i!=null&&i.delete||R(i)},onAnnotationAdd:function(){R(void 0)},onAnnotationModify:function(){},onAnnotationDelete:function(){var h=(0,F.Z)(X().mark(function i(y){var V,n0;return X().wrap(function(P0){for(;;)switch(P0.prev=P0.next){case 0:return n0=f.all.filter(function($){return $.frontendId!=y.frontendId}),(0,u.k3)({annos:n0}),f.setAll(n0),R(void 0),P0.next=6,f.pushToBackend((V=a0.curr)===null||V===void 0?void 0:V.dataId,n0);case 6:case"end":return P0.stop()}},i)}));return function(i){return h.apply(this,arguments)}}(),disabled:L.active})]})]})},G0=Q0}}]);
