(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[540],{41435:function(X,H,n){"use strict";n.d(H,{Z:function(){return L}});var k=n(94663),w=n(80112);function J(M){return Function.toString.call(M).indexOf("[native code]")!==-1}var p=n(18597);function T(M,f,B){return(0,p.Z)()?T=Reflect.construct:T=function(U,Q,Z){var r=[null];r.push.apply(r,Q);var C=Function.bind.apply(U,r),i=new C;return Z&&(0,w.Z)(i,Z.prototype),i},T.apply(null,arguments)}function L(M){var f=typeof Map=="function"?new Map:void 0;return L=function(b){if(b===null||!J(b))return b;if(typeof b!="function")throw new TypeError("Super expression must either be null or a function");if(typeof f!="undefined"){if(f.has(b))return f.get(b);f.set(b,U)}function U(){return T(b,arguments,(0,k.Z)(this).constructor)}return U.prototype=Object.create(b.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),(0,w.Z)(U,b)},L(M)}},13237:function(X){X.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___26yoA",toolBarButtonContainer:"toolBarButtonContainer___3TAcy",toolBarButton:"toolBarButton___utzQD",buttonText:"buttonText___10yo3",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___UC85Z",popover:"popover___V2uUa",slider:"slider___293AL",popoverLeft:"popoverLeft___2uQ3J"}},85024:function(X){X.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(X){X.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},26647:function(X){X.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},8978:function(X,H,n){"use strict";n.d(H,{Z:function(){return Z}});var k=n(11849),w=n(2824),J=n(91220),p=n(67294),T=n(85893);function L(r){if(!r||!r.width||!r.color||!r.points||r.points.length<2||r.frontendId==null)return"";var C=r.type=="rubber"?0:r.frontendId;return"".concat(r.width,",").concat(C,",").concat(r.points.join(","))}function M(r){var C,i=r.canvasRef,j=r.annotation,s=j.result;if(!s)return(0,T.jsx)(T.Fragment,{});var F=(C=i.current)===null||C===void 0?void 0:C.getContext("2d");if(!F)return(0,T.jsx)(T.Fragment,{});for(var _=[],l0=0,I=0;I<s.length;I++)s.at(I)==","?(_.push(parseFloat(s.slice(l0,I))),l0=I+1):s.at(I)=="|"?(_.push(parseFloat(s.slice(l0,I))),f(_,F,j),_=[],l0=I+1):I==s.length-1&&(_.push(parseFloat(s.slice(l0,s.length))),f(_,F,j));return(0,T.jsx)(T.Fragment,{})}function f(r,C,i){var j;if(r.length<4){console.log("found incorrect points:",r);return}var s=r[0],F=r[1];if(s==0){var _;b(C,r.slice(2),(_=i.label)===null||_===void 0?void 0:_.color);return}if(F==0){B(C,s,r.slice(2),void 0);return}B(C,s,r.slice(2),(j=i.label)===null||j===void 0?void 0:j.color)}function B(r,C,i,j){r.beginPath(),r.moveTo(i[0],i[1]);for(var s=0;s<=i.length/2-1;s++){var F=i[2*s],_=i[2*s+1];r.lineTo(F,_)}r.lineCap="round",r.lineJoin="round",r.lineWidth=C,j&&(r.strokeStyle=j),r.globalCompositeOperation=j?"source-over":"destination-out",r.stroke()}function b(r,C,i){console.log("renderPixel: ",C,i,r),r.globalCompositeOperation=i?"source-over":"destination-out",i&&(r.fillStyle=i);for(var j=0;j<=C.length/2-1;j++){var s=C[2*j],F=C[2*j+1];r.fillRect(s,F,1,1)}}function U(r){if(!r||r.length==0)return 0;var C=0,i=(0,J.Z)(r),j;try{for(i.s();!(j=i.n()).done;){var s=j.value;s.frontendId>C&&(C=s.frontendId)}}catch(F){i.e(F)}finally{i.f()}return C}function Q(r,C){return r=="rubber"||C==2?"rubber":"brush"}function Z(r){var C=(0,p.useState)(),i=(0,w.Z)(C,2),j=i[0],s=i[1],F=function(e0){var t0,e;if(!(r.currentTool!="brush"&&r.currentTool!="rubber"||!((t0=r.currentLabel)!==null&&t0!==void 0&&t0.color)||!r.brushSize)){var R=e0.mouseX,i0=e0.mouseY,s0=Q(r.currentTool,e0.e.evt.button);console.log("frontendId: ",r.frontendIdOps.frontendId,"maxId:",U(r.annotations));var N=r.frontendIdOps.frontendId>0?r.frontendIdOps.frontendId:U(r.annotations)+1;N!=r.frontendIdOps.frontendId&&r.frontendIdOps.setFrontendId(N);var G=L({width:r.brushSize||10,color:(e=r.currentLabel)===null||e===void 0?void 0:e.color,points:[R,i0,R,i0],type:s0,frontendId:N});if(!!G){s(s0);var K={dataId:r.dataId,label:r.currentLabel,labelId:r.currentLabel.labelId,frontendId:N,result:G,type:"brush"};r.onAnnotationAdd(K)}}},_=function(e0){var t0;if(!(!j||!r.currentAnnotation||!r.currentAnnotation.result||r.currentAnnotation.result.length<2||!((t0=r.currentLabel)!==null&&t0!==void 0&&t0.color))){var e=e0.mouseX,R=e0.mouseY,i0=r.currentAnnotation.result+",".concat(e,",").concat(R);r.onAnnotationModify((0,k.Z)((0,k.Z)({},r.currentAnnotation),{},{result:i0}))}},l0=function(){r.currentTool!="brush"&&r.currentTool!="rubber"||(s(void 0),r.onMouseUp())};return{onMouseDown:F,onMouseMove:_,onMouseUp:l0,drawAnnotation:M}}},57406:function(X,H,n){"use strict";n.d(H,{pL:function(){return w},oo:function(){return J}});var k=n(91220);function w(L){var M=0;if(!L)return M;var f=(0,k.Z)(L),B;try{for(f.s();!(B=f.n()).done;){var b=B.value;!b||!b.frontendId||b.frontendId>M&&(M=b.frontendId)}}catch(U){f.e(U)}finally{f.f()}return M}function J(L){var M=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(L);return M?{r:parseInt(M[1],16),g:parseInt(M[2],16),b:parseInt(M[3],16)}:null}function p(L){var M=L.toString(16);return M.length==1?"0"+M:M}function T(L,M,f){return"#"+p(L)+p(M)+p(f)}},36505:function(X,H,n){"use strict";n.d(H,{I:function(){return J}});var k=n(48971),w=n(85893),J=function(T){var L=(0,k.YB)();return function(M){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,B=M==null||M==""?f:f+"."+M;return(0,w.jsx)("p",{"data-test-id":B,style:{display:"inline"},children:L.formatMessage({id:B})})}}},14836:function(X,H,n){"use strict";n.d(H,{Z:function(){return e0}});var k=n(20228),w=n(11382),J=n(54421),p=n(38272),T=n(57663),L=n(71577),M=n(91220),f=n(67294),B=n(56159),b=n.n(B),U=n(49111),Q=n(19650),Z=n(2824),r=n(11849),C=n(85024),i=n.n(C),j=n(63097),s=n(85893),F=function(e){var R=(0,r.Z)({},e.annotation),i0=(0,f.useState)(R.invisible),s0=(0,Z.Z)(i0,2),N=s0[0],G=s0[1],K=(0,f.useState)(0),q=(0,Z.Z)(K,2),u0=q[0],r0=q[1];(0,f.useEffect)(function(){G(e.annotation.invisible)},[e.annotation.invisible]);var P0=(0,s.jsxs)(p.ZP.Item,{className:"".concat(i().listItem," ").concat(e.active?i().listItemActive:""),unselectable:"on",onClick:function(){e.onClick(R)},children:[(0,s.jsxs)(Q.Z,{align:"center",size:5,children:[(0,s.jsx)("a",{className:i().eye,style:{backgroundImage:N?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(y0){y0.stopPropagation(),G(!N),e.onAnnotationModify(R)}})," ",(0,s.jsx)("span",{className:i().annotationId,children:R.frontendId}),(0,s.jsx)("span",{className:i().labelName,children:R.label.name}),(0,s.jsx)(j.Z,{color:R.label.color})]}),(0,s.jsx)("a",{className:i().delete,onClick:function(y0){y0.stopPropagation();var L0=new Date().getTime();L0-u0<300||(r0(L0),e.onAnnotationDelete(R))}})]});return P0},_=F,l0=n(48971),I=function(e){var R=(0,l0.YB)(),i0=R.formatMessage({id:"component.PPAnnotationList.annotationList"}),s0=R.formatMessage({id:"component.PPAnnotationList.addAnnotation"}),N=new Set,G=[],K=(0,M.Z)(e.annotations),q;try{for(K.s();!(q=K.n()).done;){var u0=q.value;N.has(u0.frontendId)||(G.push(u0),N.add(u0.frontendId))}}catch(r0){K.e(r0)}finally{K.f()}return(0,s.jsx)(w.Z,{spinning:e.disabled,indicator:(0,s.jsx)(s.Fragment,{}),children:(0,s.jsx)(p.ZP,{className:b().labelList,size:"large",header:(0,s.jsx)("div",{className:b().listHeader,children:i0}),bordered:!0,dataSource:G,renderItem:function(P0){var b0;return(0,s.jsx)(_,{onClick:e.disabled?function(){}:e.onAnnotationSelect,annotation:P0,active:e.disabled?!1:P0.frontendId==((b0=e.currAnnotation)===null||b0===void 0?void 0:b0.frontendId),onAnnotationDelete:e.onAnnotationDelete,onAnnotationModify:e.onAnnotationModify})},footer:function(){return e.onAnnotationAdd?(0,s.jsx)("div",{children:(0,s.jsx)(L.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){e.onAnnotationAdd()},block:!0,children:s0})}):(0,s.jsx)("div",{})}})})},e0=I},27992:function(X,H,n){"use strict";var k=n(20136),w=n(55241),J=n(13062),p=n(71230),T=n(77883),L=n(70507),M=n(89032),f=n(15746),B=n(66126),b=n(75454),U=n(2824),Q=n(67294),Z=n(61541),r=n(26647),C=n.n(r),i=n(85893),j=0,s=100,F=10,_=function(I){var e0=(0,Q.useState)(K(I.size)),t0=(0,U.Z)(e0,2),e=t0[0],R=t0[1];function i0(q){R(K(q))}var s0=I.step?I.step:10,N=I.minSize==null?j:I.minSize,G=I.maxSize==null?s:I.maxSize;function K(q){return q==null?F:q<=N?N:q>=G?G:q}return(0,Q.useEffect)(function(){i0(I.size)},[I.size]),(0,i.jsxs)(w.Z,{overlayClassName:"".concat(C().popover," ").concat(I.disLoc=="left"?C().popoverLeft:""),placement:I.disLoc||"right",content:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(f.Z,{span:16,children:(0,i.jsx)(b.Z,{className:C().slider,value:e,max:G,min:N,onChange:function(u0){var r0;(r0=I.onChange)===null||r0===void 0||r0.call(0,u0)},tooltipVisible:!1})}),(0,i.jsx)(f.Z,{span:8,children:(0,i.jsx)(L.Z,{min:N,max:G,value:e,onChange:function(u0){var r0;(r0=I.onChange)===null||r0===void 0||r0.call(0,u0)},step:s0})})]}),trigger:"hover",visible:I.disabled?!1:void 0,children:[" ",(0,i.jsx)(Z.Z,{imgSrc:I.imgSrc||"",onClick:!I.disabled&&I.onClick||void 0,active:I.active,disabled:I.disabled,children:I.children})]})};H.Z=_},10137:function(X,H,n){"use strict";var k=n(34669),w=n(54458),J=n(67294),p=n(15156),T=n(85893),L=function(f){var B,b,U=(0,p.Ad)("pages.toolBar.progress");return(0,T.jsxs)("div",{className:"progress",children:[(0,T.jsx)(w.Z,{className:"progressBar",percent:Math.ceil(f.project.finished/((B=f.task.all)===null||B===void 0?void 0:B.length)*100),status:"active",showInfo:!1})," ",(0,T.jsx)("span",{className:"progressDesc",children:"".concat(U(""),": ").concat(f.project.finished||0,"/").concat((b=f.task.all)===null||b===void 0?void 0:b.length,`
        `).concat(U("currentId"),": ").concat(f.task.currIdx==null?1:f.task.currIdx+1," ")})]})};H.Z=L},22756:function(X,H,n){"use strict";n.r(H),n.d(H,{default:function(){return G0}});var k=n(11849),w=n(57663),J=n(71577),p=n(3182),T=n(20228),L=n(11382),M=n(34792),f=n(48086),B=n(91220),b=n(2824),U=n(94043),Q=n.n(U),Z=n(67294),r=n(48971),C=n(8088),i=n(61541),j=n(44434),s=n(27992),F=n(5041),_=n(57436),l0=n(14836),I=n(8978),e0=n(65031),t0=n(57406),e=n(85893);function R(t,a){if(!(!t||!a))return a.join(",")}function i0(t){var a,o=t.annotation;if(!o||!o.result||o.result.length<2||!((a=o.label)!==null&&a!==void 0&&a.color))return(0,e.jsx)(e.Fragment,{});var c=o.result.split(",").map(Number),v=o.label.color,d=(0,t0.oo)(v);if(!d)return(0,e.jsx)(e.Fragment,{});var P=.3,u=void 0,A=[];return c.forEach(function(m,y){if(!u){u=m;return}A.push((0,e.jsx)(e0.Cd,{onMouseDown:function(){t.currentTool=="editor"&&t.onSelect(o)},draggable:t.currentTool=="editor",onDragMove:function(E){var O;E.cancelBubble=!0;var I0=(O=t.stageRef)===null||O===void 0?void 0:O.current,n0=I0.findOne(".baseImage"),d0=!1,a0=E.target.x();a0>n0.width()/2&&(a0=n0.width()/2,d0=!0),a0<-n0.width()/2&&(a0=-n0.width()/2,d0=!0);var f0=E.target.y();f0>n0.height()/2&&(f0=n0.height()/2,d0=!0),f0<-n0.height()/2&&(f0=-n0.height()/2,d0=!0),d0&&E.target.setPosition({x:a0,y:f0}),c[y-1]=a0,c[y]=f0;var $=(0,k.Z)((0,k.Z)({},o),{},{result:c.join(",")});t.onDrag($)},onMouseOver:function(){var E;t.currentTool=="editor"&&(E=t.stageRef)!==null&&E!==void 0&&E.current&&(t.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var E;(E=t.stageRef)!==null&&E!==void 0&&E.current&&(t.stageRef.current.container().style.cursor="default")},x:u,y:m,radius:5/t.scale,fill:v})),u=void 0}),(0,e.jsxs)(e0.ZA,{children:[(0,e.jsx)(e0.x1,{onMouseOver:function(){t.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){t.currentTool=="editor"&&t.onSelect(o)},stroke:v,strokeWidth:2/t.scale,globalCompositeOperation:"source-over",lineCap:"round",points:c,tension:0,closed:!0,fill:"rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", ").concat(P,")")}),A]},o.frontendId)}function s0(t){var a=0;if(!t)return a;var o=(0,B.Z)(t),c;try{for(o.s();!(c=o.n()).done;){var v=c.value;!v||!v.frontendId||v.frontendId>a&&(a=v.frontendId)}}catch(d){o.e(d)}finally{o.f()}return a}function N(t){var a=function(P,u){var A,m,y=R((A=t.currentLabel)===null||A===void 0?void 0:A.color,[P,u]);!y||(console.log(y),t.onAnnotationAdd({dataId:t.dataId,type:"polygon",frontendId:s0(t.annotations)+1,label:t.currentLabel,labelId:(m=t.currentLabel)===null||m===void 0?void 0:m.labelId,result:y}))},o=function(P,u){var A;if(!(!t.currentAnnotation||!t.currentAnnotation.result||!((A=t.currentLabel)!==null&&A!==void 0&&A.color))){var m=t.currentAnnotation.result+",".concat(P,",").concat(u),y=(0,k.Z)((0,k.Z)({},t.currentAnnotation),{},{result:m});t.modifyAnnoByFrontendId(y)}},c=function(P){if(t.currentTool=="polygon"){var u=P.mouseX+P.offsetX,A=P.mouseY+P.offsetY;console.log("currentAnnotation:",t.currentAnnotation),t.currentAnnotation?o(u,A):a(u,A)}},v=function(){t.currentTool=="polygon"&&t.onMouseUp&&t.onMouseUp()};return{onMouseDown:c,onMouseMove:function(){},onMouseUp:v,drawAnnotation:i0}}var G=n(10137),K=n(15156),q=n(20136),u0=n(55241),r0=n(71194),P0=n(50146),b0=n(49111),y0=n(19650),L0=n(47673),B0=n(24044),ln=n(9715),A0=n(93766),x0="http://127.0.0.1:1234",R0=function(a){var o=A0.Z.useForm(),c=(0,b.Z)(o,1),v=c[0],d=(0,K.Ad)("component.PPInteractorModal"),P=a.model,u=a.project;(0,Z.useEffect)(function(){var m,y,z,E;if(!!u.curr){var O=u.curr.otherSettings?u.curr.otherSettings:{},I0={mlBackendUrl:O.mlBackendUrl,mlModelAbsPath:(m=O.models)===null||m===void 0||(y=m.EISeg)===null||y===void 0?void 0:y.mlModelAbsPath,mlWeightAbsPath:(z=O.models)===null||z===void 0||(E=z.EISeg)===null||E===void 0?void 0:E.mlWeightAbsPath};v.setFieldsValue(I0),O!=null&&O.mlBackendUrl?P.setMlBackendUrl(O.mlBackendUrl):P.setMlBackendUrl(x0),O.mlModelAbsPath&&O.mlWeightAbsPath&&P.load(O.mlModelAbsPath,O.mlWeightAbsPath)}},[u.curr]);function A(m){console.log("saveMlsettings",u.curr,m),u.curr||f.default.error("Please select project first!"),u.curr.otherSettings||(u.curr.otherSettings={}),u.curr.otherSettings.mlBackendUrl=v.getFieldValue("mlBackendUrl"),u.curr.otherSettings.models={},u.curr.otherSettings.models.EISeg={},u.curr.otherSettings.models.EISeg.mlModelAbsPath=v.getFieldValue("mlModelAbsPath"),u.curr.otherSettings.models.EISeg.mlWeightAbsPath=v.getFieldValue("mlWeightAbsPath"),u.curr.otherSettings.perviousModel=m.modelName,u.update(u.curr.projectId,{otherSettings:u.curr.otherSettings}),P.setMlBackendUrl(u.curr.otherSettings.mlBackendUrl),a.model.setLoading(!0),P.load(u.curr.otherSettings.models.EISeg.mlModelAbsPath,u.curr.otherSettings.models.EISeg.mlWeightAbsPath).then(function(){f.default.info(d("modelLoaded")),a.model.setLoading(!1)},function(){a.model.setLoading(!1)})}return(0,e.jsx)(P0.Z,{title:d("title"),visible:a.visible,onCancel:a.onCancel,footer:null,width:"60rem",children:(0,e.jsxs)(A0.Z,{form:v,name:"basic",labelCol:{span:8},wrapperCol:{span:16},onFinish:function(y){console.log("form finish",y),A(y),a.setVisible(!1)},autoComplete:"off",children:[(0,e.jsx)(A0.Z.Item,{name:"mlBackendUrl",label:d("mlBackendUrl"),labelCol:{span:6},wrapperCol:{span:18},initialValue:x0,style:{fontSize:"1.5rem"},children:(0,e.jsx)(B0.Z,{placeholder:x0})}),(0,e.jsx)(A0.Z.Item,{name:"mlModelAbsPath",label:d("modelPath"),labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,e.jsx)(B0.Z,{placeholder:d("pathPh")})}),(0,e.jsx)(A0.Z.Item,{name:"mlWeightAbsPath",label:d("weightPath"),labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,e.jsx)(B0.Z,{placeholder:d("pathPh")})}),(0,e.jsx)(A0.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(y0.Z,{children:[(0,e.jsx)(J.Z,{onClick:function(){var y;(y=a.onCancel)===null||y===void 0||y.call(0)},children:d("cancel","global")}),(0,e.jsx)(J.Z,{type:"primary",htmlType:"submit",children:d("ok","global")})]})})]})})},W0=R0,k0=n(13237),Z0=n.n(k0),z0=function(a){var o=(0,K.Ad)("component.PPInteractorModal"),c=a.model,v=a.project,d=(0,Z.useState)(!1),P=(0,b.Z)(d,2),u=P[0],A=P[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(u0.Z,{overlayClassName:"".concat(Z0().popover," ").concat(Z0().popoverLeft),placement:"left",content:(0,e.jsx)(J.Z,{onClick:function(){return A(!0)},type:"primary",style:{height:"2.5rem"},block:!0,children:o("title")}),trigger:"hover",children:[" ",(0,e.jsx)(i.Z,{imgSrc:a.imgSrc||"",onClick:a.onClick,active:a.active,children:a.children})]}),(0,e.jsx)(W0,{visible:u,setVisible:A,model:c,project:v,onCancel:function(){A(!1)}})]})},$0=z0,sn={result:[[.3779466152191162,.38711845874786377,.36106088757514954,.35420000553131104,.35632404685020447,.36673659086227417,.3709605634212494,.33228039741516113,.3710925579071045,.3494248390197754,.34312722086906433,.3462066650390625,.3746175765991211,.3791941702365875,.4216013550758362,.44569116830825806,.40616583824157715,.4613204002380371,.49154922366142273,.4584124684333801,.4600294828414917,.4803354740142822,.46287786960601807,.43543994426727295,.43747758865356445,.4064893126487732,.3941977620124817,.39790475368499756,.39159834384918213,.3925873935222626,.3789200186729431,.36321160197257996],[.3818621039390564,.3770502805709839,.36075377464294434,.3548894226551056,.3503073453903198,.335567444562912,.3341645896434784,.33101293444633484,.3728009760379791,.364932656288147,.37297818064689636,.37586647272109985,.3893028497695923,.39986884593963623,.41131657361984253,.4522101581096649,.4333687722682953,.5002316832542419,.4971569776535034,.473648339509964,.4820094704627991,.46783292293548584,.4617140591144562,.44852927327156067,.44560548663139343,.44700291752815247,.4248964786529541,.44343101978302,.41931068897247314,.43451547622680664,.4378070831298828,.3568068742752075],[.3652324676513672,.35223522782325745,.35097530484199524,.360146701335907,.36671239137649536,.3395833373069763,.35282737016677856,.33361345529556274,.377223938703537,.38735657930374146,.39466923475265503,.3888944387435913,.3632313311100006,.3888370096683502,.4123692810535431,.41089701652526855,.4431883990764618,.5125359296798706,.5071693658828735,.47963064908981323,.46734818816185,.4608532786369324,.4394238293170929,.40698742866516113,.42963457107543945,.4184359908103943,.39965513348579407,.4161875247955322,.4067150950431824,.45255592465400696,.44494757056236267,.34891369938850403],[.364960253238678,.3754047155380249,.3721790313720703,.37246841192245483,.3652416467666626,.32984012365341187,.3496708571910858,.3422262966632843,.3380891978740692,.3428453207015991,.36001724004745483,.36075884103775024,.36690282821655273,.375881552696228,.3909446597099304,.3976140320301056,.43047186732292175,.5223039984703064,.5174918174743652,.5091606974601746,.4703259766101837,.46562325954437256,.4584425091743469,.4025508463382721,.4088236391544342,.41495299339294434,.41274765133857727,.394614577293396,.3999204635620117,.43086522817611694,.443092942237854,.3433324098587036],[.34178581833839417,.3906759023666382,.3692866563796997,.361131876707077,.3499326705932617,.3162209391593933,.31167617440223694,.3333600163459778,.3163505494594574,.338070273399353,.35670241713523865,.3636510670185089,.35625404119491577,.35763710737228394,.38493406772613525,.39124634861946106,.4325636029243469,.5645959973335266,.5685874223709106,.5350329279899597,.4992934465408325,.4620708227157593,.45242631435394287,.41027894616127014,.4038461744785309,.3944956958293915,.39921683073043823,.3937588334083557,.38950315117836,.3928646147251129,.4300973415374756,.33759239315986633],[.34255340695381165,.384326696395874,.35354241728782654,.32820284366607666,.34075650572776794,.310611367225647,.3198155462741852,.3376222848892212,.3267553746700287,.33798253536224365,.3261478543281555,.3417035639286041,.34279346466064453,.3464927673339844,.3819480240345001,.3768705129623413,.43024203181266785,.5799015164375305,.5669912099838257,.5345537066459656,.5366686582565308,.5029425621032715,.4881816804409027,.4266446828842163,.3896041512489319,.38750505447387695,.3878398835659027,.401533305644989,.38611483573913574,.4102136492729187,.43251603841781616,.3381301164627075],[.34610551595687866,.37768492102622986,.3577062487602234,.321483314037323,.3238357901573181,.31036683917045593,.32922878861427307,.33748194575309753,.34403321146965027,.3489550054073334,.32951661944389343,.35581493377685547,.3549908995628357,.34664082527160645,.37512969970703125,.37657931447029114,.4325118064880371,.6002883911132812,.5718269348144531,.5072413086891174,.5073626041412354,.5133922100067139,.48958104848861694,.45026227831840515,.41855117678642273,.38928452134132385,.3869919180870056,.3884861171245575,.38088345527648926,.4067824184894562,.42561301589012146,.3727574646472931],[.36236464977264404,.38462936878204346,.33172523975372314,.2767360210418701,.28566184639930725,.29154667258262634,.32516488432884216,.3253626823425293,.30838415026664734,.3315502405166626,.3262888789176941,.3520568013191223,.35253870487213135,.3447986841201782,.3818697929382324,.3651794195175171,.4231885075569153,.5827294588088989,.5951063632965088,.6352673768997192,.5757752656936646,.48387131094932556,.46553540229797363,.4512472450733185,.44570550322532654,.4316057562828064,.41964590549468994,.3941313624382019,.37175554037094116,.3886064291000366,.40585458278656006,.3790917694568634],[.35083019733428955,.3677082061767578,.33382877707481384,.3098861575126648,.3019915223121643,.3109188377857208,.3330777883529663,.331575870513916,.31939375400543213,.34113019704818726,.34969979524612427,.3529251217842102,.36156511306762695,.35511070489883423,.37965914607048035,.37223300337791443,.4537010192871094,.5680437088012695,.6448143720626831,.7226863503456116,.729232907295227,.6868923902511597,.5698102116584778,.4619525372982025,.46818724274635315,.43513986468315125,.42044782638549805,.3994002342224121,.39396214485168457,.3904518187046051,.40890100598335266,.3930703103542328],[.3359583914279938,.3705343008041382,.35527661442756653,.3399384319782257,.34458956122398376,.3259856700897217,.347974956035614,.3495017886161804,.3527892231941223,.35826316475868225,.35742005705833435,.335483193397522,.34679195284843445,.36213573813438416,.38948914408683777,.3846794366836548,.4752236008644104,.5317398905754089,.6341782212257385,.7260967493057251,.7400858402252197,.7263891696929932,.6071794629096985,.49351879954338074,.4718652367591858,.4380945563316345,.44395726919174194,.42750805616378784,.4137647747993469,.41625750064849854,.42252638936042786,.4066489040851593],[.3289949595928192,.37435805797576904,.3653024733066559,.34567791223526,.37014514207839966,.36809563636779785,.36826398968696594,.32743436098098755,.3298226594924927,.34234797954559326,.34268611669540405,.3254646956920624,.3090794086456299,.3477054834365845,.37110430002212524,.3621593713760376,.4475082755088806,.487918496131897,.601881742477417,.6983312964439392,.7557751536369324,.7451871633529663,.5793305039405823,.4939006268978119,.47265419363975525,.42300844192504883,.43300366401672363,.41770070791244507,.414137601852417,.42620089650154114,.41289666295051575,.4050122797489166],[.2583468556404114,.3622201085090637,.3609732985496521,.35103529691696167,.3431868553161621,.36043819785118103,.3594401776790619,.33510416746139526,.31773367524147034,.32706841826438904,.33306169509887695,.329282283782959,.3103845715522766,.3467973470687866,.36439552903175354,.35807719826698303,.40837693214416504,.46938514709472656,.6127392053604126,.7233112454414368,.7669434547424316,.7611733675003052,.5953957438468933,.5389460921287537,.4672558009624481,.42192357778549194,.42329633235931396,.42473718523979187,.40417638421058655,.408004492521286,.4068392515182495,.45992550253868103],[.26873499155044556,.3717286288738251,.3643631339073181,.3532456159591675,.3495698571205139,.3619597554206848,.3786068260669708,.3432343006134033,.3145405650138855,.32395321130752563,.33640119433403015,.33749133348464966,.31600821018218994,.3369048535823822,.3504919409751892,.34988847374916077,.3846014440059662,.4548245966434479,.6552940011024475,.7398929595947266,.7898313999176025,.7753756642341614,.6361410617828369,.550889790058136,.4542275369167328,.41850578784942627,.4201924800872803,.4233487844467163,.4089168310165405,.40734779834747314,.4125276207923889,.45579835772514343],[.2889721095561981,.3404158651828766,.34746238589286804,.3323819637298584,.36239108443260193,.36021608114242554,.3564058542251587,.34031766653060913,.3106665015220642,.32129210233688354,.32644376158714294,.3231737017631531,.30393165349960327,.34000542759895325,.3698198199272156,.3764057457447052,.37690526247024536,.44695284962654114,.6244124174118042,.7085537910461426,.7864880561828613,.7922757267951965,.6478504538536072,.5585101842880249,.46907946467399597,.43042469024658203,.4196140766143799,.4143720269203186,.41768819093704224,.4123932123184204,.40979909896850586,.40944749116897583],[.33511802554130554,.3354792892932892,.3483961820602417,.3393648862838745,.36110979318618774,.37371599674224854,.3693099021911621,.3380741477012634,.31597936153411865,.3110752999782562,.3071911334991455,.29553914070129395,.28971895575523376,.3283897936344147,.3738657832145691,.359753280878067,.37170153856277466,.45006322860717773,.622103214263916,.7240833044052124,.8724844455718994,.8468523025512695,.6292383670806885,.5481832027435303,.47547808289527893,.4294469654560089,.4108424484729767,.4051211476325989,.4253206253051758,.42601343989372253,.4097977876663208,.3356857895851135],[.3555319011211395,.3408556282520294,.35363197326660156,.3417183756828308,.3509896397590637,.38215622305870056,.41220414638519287,.3597573935985565,.3141809105873108,.299405962228775,.2974483370780945,.2919771671295166,.2913997769355774,.32095572352409363,.373879075050354,.3556964099407196,.3629939556121826,.47226566076278687,.6256035566329956,.7390267252922058,.8593417406082153,.8262102603912354,.6343622803688049,.5576579570770264,.4742991030216217,.41313984990119934,.3864082098007202,.3817637264728546,.4082636833190918,.41419312357902527,.4119032323360443,.2635403275489807],[.3506373465061188,.32203149795532227,.34963458776474,.32425546646118164,.33225691318511963,.35579705238342285,.38111579418182373,.3564165532588959,.3126765489578247,.3007081151008606,.30092623829841614,.30085325241088867,.2974894046783447,.326341450214386,.36822161078453064,.35820019245147705,.3826185166835785,.4894598424434662,.6533626317977905,.70644211769104,.7451343536376953,.7429384589195251,.6669357419013977,.5394930243492126,.45886534452438354,.41244491934776306,.39533960819244385,.370727002620697,.386724591255188,.3909628987312317,.40651923418045044,.24896344542503357],[.3370128571987152,.30008041858673096,.3007066547870636,.2964634597301483,.31920456886291504,.3513490855693817,.3618793785572052,.3482736349105835,.3220705986022949,.3098466992378235,.306601345539093,.30917924642562866,.32083860039711,.33934545516967773,.3853139877319336,.3959599435329437,.42794349789619446,.5098592042922974,.6510905027389526,.7034169435501099,.7345707416534424,.7295455932617188,.6945785880088806,.5392878651618958,.46230608224868774,.4132283627986908,.40620577335357666,.39428097009658813,.39259806275367737,.38836321234703064,.3802737891674042,.2869125008583069],[.3107353448867798,.28716710209846497,.2810332477092743,.28914326429367065,.3127279281616211,.349570631980896,.35278424620628357,.3424120545387268,.3312514126300812,.3183543384075165,.31009000539779663,.3195717930793762,.31631040573120117,.32442909479141235,.3819769620895386,.39367008209228516,.41426554322242737,.48430579900741577,.6400377750396729,.682829737663269,.7346150875091553,.7265263199806213,.6635222434997559,.5312811732292175,.4713155925273895,.40454715490341187,.41512030363082886,.4182337820529938,.39747387170791626,.3760755658149719,.3628138303756714,.3463020622730255],[.30060598254203796,.3060090243816376,.3139290511608124,.3145269751548767,.30912041664123535,.35013264417648315,.35046622157096863,.33206114172935486,.322023868560791,.3207645118236542,.3205072283744812,.32279807329177856,.3099812865257263,.3307061493396759,.3545922636985779,.3684121072292328,.39094099402427673,.43648841977119446,.6046525239944458,.6440432071685791,.6817156672477722,.6866225600242615,.6455923318862915,.5251345634460449,.4481634497642517,.4150755703449249,.4251801371574402,.404987633228302,.37328672409057617,.36327677965164185,.3602195680141449,.3206213116645813],[.30405154824256897,.3178442716598511,.33336877822875977,.3373711109161377,.32321715354919434,.3630528748035431,.3537922501564026,.3336135447025299,.30300673842430115,.31718388199806213,.3529442846775055,.34015488624572754,.3124402165412903,.3555675745010376,.35390767455101013,.37345024943351746,.4144602119922638,.44640690088272095,.573625922203064,.6119270324707031,.6456900835037231,.6455104351043701,.5934235453605652,.484555721282959,.4161651134490967,.3811432719230652,.3861028552055359,.3659202456474304,.34390294551849365,.3247116208076477,.3456142544746399,.32664284110069275],[.2826228737831116,.2938840985298157,.30609411001205444,.29632243514060974,.2861210107803345,.30216431617736816,.28895461559295654,.2819651961326599,.2588002383708954,.30655887722969055,.34061241149902344,.32973647117614746,.3005189895629883,.29779112339019775,.2948862910270691,.3190575838088989,.3858416974544525,.4116919934749603,.5491650104522705,.5732342004776001,.5938672423362732,.5976152420043945,.5155865550041199,.45706799626350403,.3356960117816925,.31694191694259644,.3380652368068695,.3176265358924866,.315368115901947,.3020714521408081,.3154049515724182,.32578057050704956]]};function N0(t){if(!t)return"";var a=document.createElement("canvas");a.width=t.width,a.height=t.height;var o=a.getContext("2d");o==null||o.drawImage(t,0,0);var c=a.toDataURL("image/png");return c.replace(/^data:image\/(png|jpg);base64,/,"")}function K0(t){var a,o,c=t.canvasRef;if(!t.interactorData||!((a=t.label)!==null&&a!==void 0&&a.color))return(0,e.jsx)(e.Fragment,{});var v=t.interactorData.predictData,d=(o=c.current)===null||o===void 0?void 0:o.getContext("2d");return d?(console.log("PPInteractor.drawAnnotation",t.interactorData),Y0(_0(v,t.threshold),d,t.label.color),V0(t.interactorData.mousePoints,d,t.radius||10),(0,e.jsx)(e.Fragment,{})):(0,e.jsx)(e.Fragment,{})}function V0(t,a,o){if(!!t){var c=(0,B.Z)(t),v;try{for(c.s();!(v=c.n()).done;){var d=v.value,P=(0,b.Z)(d,3),u=P[0],A=P[1],m=P[2];a.beginPath(),m?a.fillStyle="#FF0000":a.fillStyle="#008000",a.beginPath(),a.arc(u,A,o,0,2*Math.PI),a.lineWidth=2,a.fill(),a.strokeStyle="#FFF",a.beginPath(),a.arc(u,A,o,0,2*Math.PI),a.stroke()}}catch(y){c.e(y)}finally{c.f()}}}function _0(t,a){var o=a?a*.01:.5,c=[],v=0,d=(0,B.Z)(t),P;try{for(d.s();!(P=d.n()).done;){var u=P.value,A=0,m=(0,B.Z)(u),y;try{for(m.s();!(y=m.n()).done;){var z=y.value;z>=o&&c.push(A,v),A++}}catch(E){m.e(E)}finally{m.f()}v++}}catch(E){d.e(E)}finally{d.f()}return c}function H0(t,a,o,c,v){if(!c||!v||!o)return null;var d=_0(o,t),P=0,u=p0(a),A="".concat(P,",").concat(u,",")+d.join(","),m={dataId:c,label:v,labelId:v.labelId,frontendId:u,result:A,type:"brush"};return m}function Y0(t,a,o){if(t.length<4){console.log("found incorrect points:",t);return}X0(a,t.slice(2),o)}function X0(t,a,o){t.globalCompositeOperation=o?"source-over":"destination-out",o&&(t.fillStyle=o);for(var c=0;c<=a.length/2-1;c++){var v=a[2*c],d=a[2*c+1];t.fillRect(v,d,1,1)}}function p0(t){if(!t||t.length==0)return 0;var a=0,o=(0,B.Z)(t),c;try{for(o.s();!(c=o.n()).done;){var v=c.value;v.frontendId>a&&(a=v.frontendId)}}catch(d){o.e(d)}finally{o.f()}return a}function w0(t){var a=(0,r.tT)("InteractorData"),o=a.interactorData,c=a.setInteractorData,v=t.model,d=(0,K.Ad)("pages.toolBar"),P=function(){var m=(0,p.Z)(Q().mark(function y(z){var E,O,I0,n0,d0,a0;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(t.currentTool=="interactor"){$.next=2;break}return $.abrupt("return");case 2:if((E=t.currentLabel)!==null&&E!==void 0&&E.color){$.next=5;break}return f.default.error(d("chooseCategoryFirst")),$.abrupt("return");case 5:if(O=Math.round(z.mouseX),I0=Math.round(z.mouseY),n0=t.frontendIdOps.frontendId>0?t.frontendIdOps.frontendId:p0(t.annotations)+1,n0!=t.frontendIdOps.frontendId&&t.frontendIdOps.setFrontendId(n0),o.mousePoints.push(new Array(O,I0,z.e.evt.button!=2)),!(!o.mousePoints.length||!z.stageRef.current||n0==null)){$.next=12;break}return $.abrupt("return");case 12:return d0=N0(z.img),$.next=15,v.predict({format:"b64",img:d0,other:{clicks:o.mousePoints}});case 15:if(a0=$.sent,a0){$.next=18;break}return $.abrupt("return");case 18:c({active:!0,mousePoints:o.mousePoints,predictData:a0.result});case 19:case"end":return $.stop()}},y)}));return function(z){return m.apply(this,arguments)}}(),u=function(){},A=function(){t.currentTool=="interactor"&&t.onMouseUp()};return{onMouseDown:P,onMouseMove:u,onMouseUp:A,drawAnnotation:K0}}var J0=n(36505),Q0=function(){var a,o=(0,J0.I)("pages.toolBar"),c=(0,Z.useState)(0),v=(0,b.Z)(c,2),d=v[0],P=v[1],u=(0,Z.useState)(10),A=(0,b.Z)(u,2),m=A[0],y=A[1],z=(0,Z.useState)(50),E=(0,b.Z)(z,2),O=E[0],I0=E[1],n0=(0,Z.useState)(60),d0=(0,b.Z)(n0,2),a0=d0[0],f0=d0[1],$=(0,r.tT)("VisualRadius"),q0=$.radius,nn=$.setRadius,U0=(0,r.tT)("InteractorData"),x=U0.interactorData,S0=U0.setInteractorData,j0=(0,K.RZ)(Z.useState),v0=(0,K.$L)(Z.useState,Z.useEffect,{effectTrigger:{postTaskChange:function(l,S){h0.init(),h0.record({annos:S})}},label:{oneHot:!0,postSelect:function(){h.setCurr(void 0),P(0)},preUnsetCurr:rn},tool:{defaultTool:"mover"},task:{push:!0}}),D=v0.tool,en=v0.loading,E0=v0.scale,h=v0.annotation,D0=v0.task,m0=v0.data,M0=v0.project,c0=v0.label,tn=v0.refreshVar,h0=v0.annHistory;function rn(){h.setCurr(void 0),P(0)}var W=function(l){h.setCurr(l),l!=null&&l.frontendId?P(l.frontendId):P(0)},O0=function(){if(x.active){var l;console.log(D.curr);var S=H0(O,h.all,x==null?void 0:x.predictData,(l=m0.curr)===null||l===void 0?void 0:l.dataId,c0.curr);if(S){var Y,o0=h.all.concat([S]);h.setAll(o0),W(S),h.pushToBackend((Y=m0.curr)===null||Y===void 0?void 0:Y.dataId,o0)}S0({active:!0,predictData:[],mousePoints:[]}),W(void 0)}};(0,Z.useEffect)(function(){h0.init()},[]);var on=function(l){!l||(h.all.pop(),h.all.push(l),W(l),h.setAll(h.all))},F0=function(l){var S=[],Y=(0,B.Z)(h.all),o0;try{for(Y.s();!(o0=Y.n()).done;){var g0=o0.value;g0.frontendId==l.frontendId?S.push(l):S.push(g0)}}catch(C0){Y.e(C0)}finally{Y.f()}W(l),h.setAll(S)},T0={dataId:(a=m0.curr)===null||a===void 0?void 0:a.dataId,currentLabel:c0.curr,brushSize:m,scale:E0.curr,currentTool:D.curr,annotations:h.all,currentAnnotation:h.curr,onAnnotationAdd:function(l){var S=h.all.concat([l]);h.setAll(S),W(l)},onAnnotationModify:on,modifyAnnoByFrontendId:F0,onMouseUp:function(){var l;x.active||(h0.record({annos:h.all,currAnno:h.curr}),h.pushToBackend((l=m0.curr)===null||l===void 0?void 0:l.dataId,h.all))},frontendIdOps:{frontendId:d,setFrontendId:P},model:j0},an={polygon:N(T0),brush:(0,I.Z)(T0),interactor:w0(T0)};return(0,e.jsxs)(C.Z,{className:"segment",children:[(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/polygon.png",active:D.curr=="polygon",disabled:x.active,onClick:function(){if(!c0.curr){f.default.error(o("chooseCategoryFirst"));return}D.setCurr("polygon"),W(void 0)},children:o("polygon")}),(0,e.jsx)(i.Z,{active:D.curr=="editor",disabled:x.active,imgSrc:"./pics/buttons/edit.png",onClick:function(){D.setCurr("editor"),W(void 0)},children:o("edit")}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/brush.png",size:m,active:D.curr=="brush",disabled:x.active,onClick:function(){if(!c0.curr){f.default.error(o("chooseCategoryFirst"));return}D.curr!="rubber"&&D.curr!="brush"&&W(void 0),D.setCurr("brush")},onChange:function(l){y(l)},children:o("brush")}),(0,e.jsx)(s.Z,{size:m,active:D.curr=="rubber",disabled:x.active,onClick:function(){D.curr!="rubber"&&D.curr!="brush"&&W(void 0),D.setCurr("rubber")},onChange:function(l){y(l)},imgSrc:"./pics/buttons/rubber.png",children:o("rubber")}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){E0.change(.1)},children:o("zoomIn")}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){E0.change(-.1)},children:o("zoomOut")}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){var l;h.pushToBackend((l=m0.curr)===null||l===void 0?void 0:l.dataId)},disabled:x.active,children:o("save")}),(0,e.jsx)(i.Z,{active:D.curr=="mover",imgSrc:"./pics/buttons/move.png",onClick:function(){D.curr=="mover"?x.active?D.setCurr("interactor"):D.setCurr(void 0):D.setCurr("mover")},children:o("move")}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){var l=h0.backward();if(l){var S;h.setAll(l.annos),W(l.currAnno),h.pushToBackend((S=m0.curr)===null||S===void 0?void 0:S.dataId,l.annos)}},disabled:x.active,children:o("unDo")}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){var l=h0.forward();if(l){var S;h.pushToBackend((S=m0.curr)===null||S===void 0?void 0:S.dataId,l.annos),W(l.currAnno)}},disabled:x.active,children:o("reDo")}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/clear_mark.png",onClick:function(){h.setCurr(void 0),h.clear(),h0.record({annos:[]})},disabled:x.active,children:o("clearMark")})]}),(0,e.jsxs)("div",{id:"dr",className:"mainStage",children:[(0,e.jsxs)(L.Z,{tip:"loading",spinning:!!en.curr,children:[(0,e.jsx)("div",{className:"draw",children:(0,e.jsx)(_.Z,{scale:E0.curr,annotations:h.all,currentTool:D.curr,currentAnnotation:h.curr,currentLabel:c0.curr,setCurrentAnnotation:W,onAnnotationModify:F0,onAnnotationModifyComplete:function(){x.active||h0.record({annos:h.all,currAnno:h.curr})},frontendIdOps:{frontendId:d,setFrontendId:P},imgSrc:m0.imgSrc,transparency:a0,threshold:O,onAnnotationAdd:function(l){var S=h.all.concat([l]);h.setAll(S),h.curr||W(l)},drawTool:an,refresh:tn})}),(0,e.jsx)("div",{className:"prevTask","data-test-id":"prevTask",onClick:function(){x.active&&O0(),!!D0.prevTask()&&(W(void 0),x.active||S0({active:!1,predictData:[],mousePoints:[]}))}}),(0,e.jsx)("div",{className:"nextTask","data-test-id":"nextTask",onClick:function(){x.active&&O0(),!!D0.nextTask()&&(W(void 0),x.active||S0({active:!1,predictData:[],mousePoints:[]}))}})]}),(0,e.jsx)("div",{className:"pblock",children:(0,e.jsx)(G.Z,{task:D0,project:M0})})]}),(0,e.jsxs)(j.Z,{disLoc:"right",children:[(0,e.jsx)($0,{imgSrc:"./pics/buttons/intelligent_interaction.png",active:x.active,onClick:(0,p.Z)(Q().mark(function g(){var l,S,Y,o0,g0;return Q().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!j0.loading){V.next=3;break}return f.default.error(o("modelLoading")),V.abrupt("return");case 3:if(!x.active){V.next=8;break}D.setCurr(void 0),S0({active:!1,predictData:[],mousePoints:[]}),V.next=20;break;case 8:if(g0=M0.curr.otherSettings?M0.curr.otherSettings:{},!((l=g0.models)!==null&&l!==void 0&&(S=l.EISeg)!==null&&S!==void 0&&S.mlModelAbsPath&&(Y=g0.models)!==null&&Y!==void 0&&(o0=Y.EISeg)!==null&&o0!==void 0&&o0.mlWeightAbsPath)){V.next=18;break}return V.prev=10,V.next=13,j0.load(g0.models.EISeg.mlModelAbsPath,g0.models.EISeg.mlWeightAbsPath);case 13:V.next=18;break;case 15:return V.prev=15,V.t0=V.catch(10),V.abrupt("return");case 18:D.setCurr("interactor"),S0({active:!0,predictData:[],mousePoints:[]});case 20:case"end":return V.stop()}},g,null,[[10,15]])})),model:j0,project:M0,children:o("interactor")}),(0,e.jsx)(s.Z,{disabled:!x.active,imgSrc:"./pics/buttons/threshold.png",disLoc:"left",size:O,maxSize:100,minSize:10,step:10,onChange:function(l){I0(l)},children:o("segmentThreshold")}),(0,e.jsx)(s.Z,{disabled:!x.active,imgSrc:"./pics/buttons/radius.png",disLoc:"left",size:q0,maxSize:50,minSize:5,step:5,onChange:function(l){nn(l)},children:o("visualRadius")}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",size:a0,maxSize:100,minSize:0,onChange:function(l){f0(l)},children:o("transparency")}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){r.m8.push("/project_overview?projectId=".concat(M0.curr.projectId))},children:o("projectOverview")})]}),(0,e.jsxs)("div",{className:"rightSideBar",children:[(0,e.jsx)("div",{className:"determinOutline",children:(0,e.jsx)(J.Z,{disabled:D.curr!="interactor",style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){O0()},children:o("determineOutline")})}),(0,e.jsx)(F.Z,{hideColorPicker:!1,labels:c0.all,activeIds:c0.activeIds,onLabelSelect:c0.onSelect,onLabelModify:function(){},onLabelDelete:c0.remove,onLabelAdd:function(l){c0.create((0,k.Z)((0,k.Z)({},l),{},{projectId:M0.curr.projectId})).then(function(S){W(void 0),c0.setCurr(S)})}}),(0,e.jsx)(l0.Z,{currAnnotation:h.curr,annotations:h.all,onAnnotationSelect:function(l){l!=null&&l.delete||W(l)},onAnnotationAdd:function(){W(void 0)},onAnnotationModify:function(){},onAnnotationDelete:function(){var g=(0,p.Z)(Q().mark(function l(S){var Y,o0;return Q().wrap(function(C0){for(;;)switch(C0.prev=C0.next){case 0:return o0=h.all.filter(function(V){return V.frontendId!=S.frontendId}),h0.record({annos:o0}),h.setAll(o0),W(void 0),C0.next=6,h.pushToBackend((Y=m0.curr)===null||Y===void 0?void 0:Y.dataId,o0);case 6:case"end":return C0.stop()}},l)}));return function(l){return g.apply(this,arguments)}}(),disabled:x.active})]})]})},G0=Q0}}]);
